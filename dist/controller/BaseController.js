sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/UIComponent","sap/ui/core/BusyIndicator","com/swcc/Template/util/api","sap/ui/model/json/JSONModel","sap/m/MessageBox","sap/ui/core/routing/History","sap/ui/Device","sap/m/library"],function(e,t,n,r,a,o,i,s,l){"use strict";return e.extend("com.swcc.Template.controller.BaseController",{getAPI:r,getRouter:function(){return t.getRouterFor(this)},getCurrentUserLoggedIn:function(){try{var e=(new sap.ushell.services.UserInfo).getId();return e}catch(t){var e="WT_POWER";return e}},getCurrentLogInUserName:function(){try{var e=(new sap.ushell.services.UserInfo).getUser().getFirstName();return e}catch(t){var e="User";return e}},onHandleValueHelpRequest:function(e,t,n,r){this._oMultiInput=this.getView().byId("multiInput");this.oColModel=new a({cols:t});var o=this.oColModel.getData().cols;this._oValueHelpDialog=sap.ui.xmlfragment(r,this);this.getView().addDependent(this._oValueHelpDialog);this._oValueHelpDialog.getTableAsync().then(function(t){if(s.system.desktop){this._oValueHelpDialog.addStyleClass("sapUiSizeCompact")}t.setModel(e);t.setModel(this.oColModel,"columns");if(t.bindRows&&n){t.bindAggregation("rows",{path:n,events:{dataReceived:function(){this._oValueHelpDialog.update()}.bind(this)}})}if(t.bindItems&&n){t.bindAggregation("items",n,function(){return new sap.m.ColumnListItem({cells:o.map(function(e){return new sap.m.Label({text:"{"+e.template+"}"})})})})}t.setSelectionMode("Single");this._oValueHelpDialog.update()}.bind(this));this._oValueHelpDialog.open()},onHandleValueHelpOkPress:function(e,t,n,r,a,o){var i=[];var s=new Set;n.forEach(function(e){if(s.has(e.getKey())==false){var t={};var n=e.getText().split("(")[0].trim();t[a]=n;t[r]=e.getKey();i.push(t);s.add(e.getKey())}});if(o==="SSA-FIN-3007-1"){e.setProperty(t,i.length===0?"":`${i[0][r]}: ${i[0][a]}`)}else if(o==="SSA-FIN-3007-2"){e.setProperty(t,i.length===0?"":`${i[0][r]}: ${i[0][a]}`)}else if(o==="SSA-FIN-3007-3"){e.setProperty(t,i.length===0?"":`${i[0][r]}: ${i[0][a]}`)}else if(o==="SSA-FIN-3007-4"){e.setProperty(t,i.length===0?"":`${i[0][r]}: ${i[0][a]}`)}else{e.setProperty(t,i.length===0?"":`${i[0][r]}- ${i[0][a]}`)}this._oValueHelpDialog.close()},onHandleValueHelpCancelPress:function(){this._oValueHelpDialog.close()},handleVHFilterTable:function(e,t,n){var r=this._oValueHelpDialog;if(!Array.isArray(n)){n=[n]}if(r){r.getTableAsync().then(function(n){if(n){var a;if(n.bindRows){a=n.getBinding("rows")}else if(n.bindItems){a=n.getBinding("items")}if(a){a.filter(e,t||"Application")}r.update()}})}else if(n){n.forEach(function(n){if(n){var r;if(n.bindRows){r=n.getBinding("rows")}else if(n.bindItems){r=n.getBinding("items")}if(r){r.filter(e,t||"Application")}}})}},CallValueHelpAPI:function(e){return new Promise(function(t,n){this.getOwnerComponent().getModel("ZSSP_COMMON_SRV")["read"](e,{success:function(e){t(e)},error:function(e){n(e)}})}.bind(this))},navigationBack:function(){var e,t;e=i.getInstance();t=e.getPreviousHash();if(t!==undefined){window.history.go(-1)}else{this.getRouter().navTo("HomePage",{},true)}},getFilters:function(e,t){var n={};e.forEach(function(e){if(e.value!==undefined&&e.value!==""){var t=new sap.ui.model.Filter({path:e.path,operator:e.operator?e.operator:sap.ui.model.FilterOperator.EQ,value1:e.value});if(!n[e.group]){n[e.group]={filters:[],useOR:e.useOR||false}}n[e.group].filters.push(t)}});var r={};Object.keys(n).forEach(function(e){var t=n[e].filters;var a=n[e].useOR;r[e]=new sap.ui.model.Filter(t,a)});if(t){debugger;r.$orderby=t}return r},createMessageBoxHandler:function(e){return function(t){var n=t&&t.sMessage?t.sMessage:"";var r=t&&t.icon?t.icon:o.Icon.SUCCESS;var a=t&&t.title?t.title:"Success";var i=t&&t.actions?t.actions:[o.Action.OK];var s=t&&t.emphasizedAction?t.emphasizedAction:o.Action.YES;sap.m.MessageBox.success(n,{icon:r,title:a,actions:i,emphasizedAction:s,onClose:function(t){if(t===o.Action.OK&&e&&typeof e==="function"){e()}}})}},handleConfirmMessage:function(e){return function(t){var n=new sap.m.Dialog({title:"Confirm",type:"Message",content:[new sap.ui.core.Icon({src:"sap-icon://alert",size:"2rem",color:"red"}),new sap.m.Text({text:t.sMsgTxt})],beginButton:new sap.m.Button({text:t.sBtnTxt,press:function(){e.call(this,t.sRequestID);n.close()}.bind(this)}),endButton:new sap.m.Button({text:"Cancel",press:function(){n.close()}}),afterClose:function(){n.destroy()}});if(s.system.desktop){n.addStyleClass("sapUiSizeCompact")}n.open()}},addContentDensityClass:function(){return this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass())},getModel:function(){return this.getOwnerComponent().getModel()},base64ToBlob:function(e,t){t=t||"";const n=atob(e);const r=new Array(n.length);for(let e=0;e<n.length;e++){r[e]=n.charCodeAt(e)}const a=new Uint8Array(r);return new Blob([a],{type:t})},_getImageData:function(e,t,n){var r=new FileReader;r.onloadend=function(e){if(e.target.readyState===FileReader.DONE){var n=e.target.result,r=btoa(n);t(r)}};r.readAsBinaryString(e)},handleFileMissmatch:function(){return o.error("Please upload only PDF and WORD document File.")},handleFileSizeExceed:function(){return o.error("File size exceeded, Please upload file upto 2MB.")},handleFileSizeExceedScm:function(){return o.error("File size exceeded, Please upload file upto 5MB.")},handleSetLocalStaorage:function(e,t){var n=jQuery.sap.storage(jQuery.sap.storage.Type.local);n.put(e,t)},handlegetlocalStorage:function(e){var t=jQuery.sap.storage(jQuery.sap.storage.Type.local);return t.get(e)},setModel:function(e,t){return this.getView().setModel(e,t)},handleDateFormat:function(e){const t=String(e.getDate()).padStart(2,"0");const n=String(e.getMonth()+1).padStart(2,"0");const r=e.getFullYear();return`${t}-${n}-${r}`},handleTimeFormat:function(e){var t=e;var n=t.getHours();var r=t.getMinutes();var a=t.getSeconds();var o=String(n).padStart(2,"0");var i=String(r).padStart(2,"0");var s=String(a).padStart(2,"0");var l=o+":"+i+":"+s;return l},handleOdataDateFormat:function(e){var t=e;var n=t.split("/");var r=parseInt(n[0],10);var a=parseInt(n[1],10);var o=parseInt(n[2],10);var i=new Date(o,a-1,r);var s=new Date;i.setHours(s.getHours(),s.getMinutes(),s.getSeconds());return i},handleReturnDateonly:function(e){var t=e;var n=t.getFullYear();var r=t.getMonth();var a=t.getDate()+1;var o=new Date(n,r,a);return o},handleReturnDateonly1:function(e){var t=e;var n=t.getFullYear();var r=t.getMonth();var a=t.getDate()+1;var o=`${a}/${r}/${n}`;var o=this.handleOdataDateFormat(o);return o},formatBytesToMB:function(e){var t=e/(1024*1024);return t.toFixed(2)+" MB"},extractIndexFromPath:function(e){var t=e.match(/\/(\d+)$/);if(t&&t[1]){return parseInt(t[1],10)}return null},_handleError:function(e){var t=this.getOwnerComponent().getErrorHandler();if(t){t._showServiceError(e)}},handleRegexforremovedash:function(e){const t=/v-\d+/;const n=e.match(t);if(n){console.log("Match 2:",n[0]);return n[0]}else{return e.split("-")[0]}},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()}})});