sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","sap/m/MessageBox","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast"],function(e,t,r,o,i,a,s,l){"use strict";return e.extend("com.swcc.Template.controller.SCMCreateRequest",{onInit:function(){this.oRouter=this.getRouter();this.getRouter().getRoute("SCMCreateRequest").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(){this._createItemDataModel();var e=jQuery.sap.storage(jQuery.sap.storage.Type.local),t=e.get("sSubServiceType");var r=t.split("_")[0];var o=t.split("_")[1];var i=t.split("_")[3];this.getModel().setProperty("/MaterialProcurement/Header/Material",r);this.getModel().setProperty("/ServiceDescription",o);this.getModel().setProperty("/SCMAppVisible/",r);var a=this.handlegetlocalStorage("userPlant");this.getModel().setProperty("/PlantF4",a);var s=this.handlegetlocalStorage("userType")},onValueHelpRequest:function(e){var t=e.getSource().getBindingContext()?parseInt(e.getSource().getBindingContext().getPath().split("/")[4]):"";this.getModel().setProperty("/itemIndex",t);var r=this.handleItemValuehelps(t,e.getSource().getAriaLabelledBy()[0].split("-")[6],e.getSource().getBindingContext());this.getModel().setProperty("/valueHelpName",e.getSource().getAriaLabelledBy()[0].split("-")[6]);var o=e.getSource().getAriaLabelledBy()[0].split("-")[3];var i=e.getSource().getAriaLabelledBy()[0].split("-")[4];var a=e.getSource().getAriaLabelledBy()[0].split("-")[5];var s=r===""?e.getSource().getAriaLabelledBy()[0].split("-")[6]:r;this.getModel().setProperty("/FragModel",s);this.handleFiltersForValueHelp(this.getModel().getProperty("/FragModel"));var l=e.getSource().getCustomData()[0].getKey();var g=e.getSource().getCustomData()[0].getValue();var p=e.getSource().getCustomData()[1].getKey();var n=e.getSource().getCustomData()[1].getValue();this.getModel().setProperty("/valueHelpKey1",l);this.getModel().setProperty("/valueHelpKey2",p);var d=this.getOwnerComponent().getModel(o);var P=[{label:g,template:l,width:"10rem"},{label:n,template:p}];this.onHandleValueHelpRequest(d,P,i,a)},handleItemValuehelps:function(e,t,r){if(e===""){this.getModel().setProperty("/HeaderValueHelp",true);return""}this.getModel().setProperty("/HeaderValueHelp",false);var o;var i=r.getPath();var a=i.replace(/\/\d+$/,"");o=this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"&&this.getModel().getProperty(`${a}`).length!==0?`${i}${t}`:o;o=this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"&&this.getModel().getProperty(`${a}`).length!==0?`${i}${t}`:o;o=this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"&&this.getModel().getProperty(`${a}`).length!==0?`${i}${t}`:o;o=this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-2"&&this.getModel().getProperty(`${a}`).length!==0?`${i}${t}`:o;o=this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-1"&&this.getModel().getProperty(`${a}`).length!==0?`${i}${t}`:o;o=this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-A"&&this.getModel().getProperty(`${a}`).length!==0?`${i}${t}`:o;o=this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2002-1"&&this.getModel().getProperty(`${a}`).length!==0?`${i}${t}`:o;o=this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-1"&&this.getModel().getProperty(`${a}`).length!==0?`${i}${t}`:o;o=this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3-A"&&this.getModel().getProperty(`${a}`).length!==0?`${i}${t}`:o;o=this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2008-2"&&this.getModel().getProperty(`${a}`).length!==0?`${i}${t}`:o;return o},onValueHelpOkPress:function(e){var t=this.getModel().getProperty("/FragModel");var r=e.getParameter("tokens");var o=this.getModel().getProperty("/valueHelpKey1");var i=this.getModel().getProperty("/valueHelpKey2");var a=this.getModel();var t=t;this.onHandleValueHelpOkPress(a,t,r,o,i);this.setDependentFilterData();if(!this.handleItemValidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/ClasssificationandInventory/DuplicateResolution/itemData/"),"Add"))return false},setDependentFilterData:function(){if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ProductF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ProductF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-2"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ProductF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-1"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ProductF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-A"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ProductF4/"){var e=[{path:"Plant",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"Item_ProductFilter",useOR:true},{path:"Product",value:this.getModel().getProperty(`${this.getModel().getProperty("/FragModel")}`).split("-")[0],group:"Item_ProductFilter",useOR:true}];var t=this.getFilters(e);this.callDependentFilterAPI("ZSSP_SCM_SRV","/ZCDSV_SCM_PRODUCTVH",t.Item_ProductFilter,`${this.getModel().getProperty("/FragModel")}`)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ProductF4/"){var e=[{path:"Plant",value:this.getModel().getProperty("/SuppPlantF4/")?this.getModel().getProperty("/SuppPlantF4/").split("-")[0]:"",group:"Item_ProductFilter",useOR:true},{path:"Product",value:this.getModel().getProperty(`${this.getModel().getProperty("/FragModel")}`).split("-")[0],group:"Item_ProductFilter",useOR:true}];var t=this.getFilters(e);this.callDependentFilterAPI("ZSSP_SCM_SRV","/ZCDSV_SCM_PRODUCTVH",t.Item_ProductFilter,`${this.getModel().getProperty("/FragModel")}`)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/WarehouseF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/WarehouseF4/"){var e=[{path:"Material",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"WareHouseFilter",useOR:true},{path:"Warehouse",value:this.getModel().getProperty(`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}/WarehouseF4/`).split("-")[0],group:"WareHouseFilter"}];var t=this.getFilters(e);this.callDependentFilterAPI("ZSSP_SCM_SRV","/ZCDSV_SC_STORAGEBIN",t.WareHouseFilter,`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}`)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ProductF4/"){var e=[{path:"Product",value:this.getModel().getProperty(`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`).split("-")[0],group:"Sto_ProductFilter",useOR:true}];var t=this.getFilters(e);this.callDependentFilterAPI("ZSSP_SCM_SRV","/ZCDSV_SCM_PRODUCTVH",t.Sto_ProductFilter,`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}`)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/StoragelocationF4/"){var e=[{path:"Plant",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"Item_ProductFilter",useOR:true},{path:"Material",value:this.getModel().getProperty(`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`).split("-")[0],group:"Item_ProductFilter",useOR:true},{path:"StorageLoc",value:this.getModel().getProperty(`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/StoragelocationF4/`).split("-")[0],group:"Item_ProductFilter",useOR:true}];var r=this.getModel().getProperty(`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`).split("-")[0];var o=this.getModel().getProperty(`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/Plant/`);var i=this.getModel().getProperty(`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/StoragelocationF4/`).split("-")[0];var a=`/SCMStockCheckSet(Material='${r}',Plant='${o}',StorageLoc='${i}')`;this.callDependentFilterAPI("ZSSP_SCM_SRV",a,null,`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/StoragelocationF4/`)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-1"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ClassF4/"){var e=[{path:"ClassInternalID",value:this.getModel().getProperty(`${this.getModel().getProperty("/FragModel")}`).split("-")[0],group:"WareHouseFilter"}];var t=this.getFilters(e);this.callDependentFilterAPI("ZSSP_SCM_SRV","/I_ClfnClassCharcForKeyDate",t.WareHouseFilter,`${this.getModel().getProperty("/FragModel")}`)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3-A"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ProductF4/"){var e=[{path:"Plant",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"Item_ProductFilter",useOR:true},{path:"Material",value:this.getModel().getProperty(`${this.getModel().getProperty("/FragModel")}`).split("-")[0],group:"Item_ProductFilter",useOR:true},{path:"StorageLoc",value:"100",group:"Item_ProductFilter",useOR:true}];var r=this.getModel().getProperty(`/WarehouseandLogistics/Scrapsale/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`).split("-")[0];var o=this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"";var i=100;var a=`/SCMStockCheckSet(Material='${r}',Plant='${o}',StorageLoc='${i}')`;this.callDependentFilterAPI("ZSSP_SCM_SRV",a,null,`/WarehouseandLogistics/Scrapsale/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-1"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ContractvalueF4/"){let e=this.getModel().getProperty("/ContractvalueF4/")?parseInt(this.getModel().getProperty("/ContractvalueF4/").split("-")[1]):"";var s=parseInt(5e3)+.01*e;this.getModel().setProperty(`/ContractManagement/ContractualChangeOrders/Header/TotalValue/`,s)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2008-2-A"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/StosrF4/"){var e=[{path:"qmnum",value:this.getModel().getProperty("/StosrF4/")?this.getModel().getProperty("/StosrF4/").split("-")[0]:"",group:"StoFilter"}];var t=this.getFilters(e);this.callDependentFilterAPI("ZSSP_SCM_SRV","/ZCDSV_SCM_STO_REQ_VH",t.StoFilter,`${this.getModel().getProperty("/FragModel")}`)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-1"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ProductF4/"){debugger;var e=[{path:"Plant",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"Item_ProductFilter",useOR:true},{path:"Product",value:this.getModel().getProperty("/ProductF4/")?this.getModel().getProperty("/ProductF4/").split("-")[0]:"",group:"Item_ProductFilter",useOR:true}];var t=this.getFilters(e);this.callDependentFilterAPI("ZSSP_SCM_SRV","/ZCDSV_SCM_PRODUCTVH",t.Item_ProductFilter,`${this.getModel().getProperty("/FragModel")}`)}},callDependentFilterAPI:function(e,t,r,i){this.getModel().setProperty("/busy",true);this.getAPI.oDataACRUDAPICall(this.getOwnerComponent().getModel(e),"GET",t,null,r,null).then(function(e){this.handleDependentFilterResponse(e.results?e.results:e,`${i}`);this.getModel().setProperty("/busy",false)}.bind(this)).catch(function(e){o.error(e.responseText);this.getModel().setProperty("/busy",false)}.bind(this))},handleDependentFilterResponse:function(e,t){debugger;e=e?e:e[0];if(!e){return}var r=t.replace(/\/[^/]+\/$/,"/");if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"&&this.getModel().getProperty("/FragModel")===`${t}`||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"&&this.getModel().getProperty("/FragModel")===`${t}`){this.getModel().setProperty(`${r}/Plant/`,e[0].Plant);this.getModel().setProperty(`${r}/BaseUnit/`,e[0].BaseUnit)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"&&this.getModel().getProperty("/FragModel")===`${t}`){var o=t.replace(/\/$/,"").split("/").pop();if(o==="ProductF4"){this.getModel().setProperty(`${r}/Plant/`,e[0].Plant);this.getModel().setProperty(`${r}/BaseUnit/`,e[0].BaseUnit);this.getModel().setProperty(`${r}/Description/`,e[0].Description)}else if(o==="StoragelocationF4"){this.getModel().setProperty(`${r}/Stock/`,e.Stock?e.Stock:0);this.getModel().setProperty(`${r}/Price/`,e.Price)}}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-2"&&this.getModel().getProperty("/FragModel")===`${t}`||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-1"&&this.getModel().getProperty("/FragModel")===`${t}`){this.getModel().setProperty(`${r}/Plant/`,e[0].Plant);this.getModel().setProperty(`${r}/BaseUnit/`,e[0].BaseUnit);this.getModel().setProperty(`${r}/Description/`,e[0].Description)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-A"&&this.getModel().getProperty("/FragModel")===`${t}`){this.getModel().setProperty(`${r}/Plant/`,e[0].Plant);this.getModel().setProperty(`${r}/Description/`,e[0].Description)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-1"&&!this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/FragModel")===`${t}`){this.getModel().setProperty(`/ClasssificationandInventory/ChangeRequest/itemData/`,e)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-2"){this.getModel().setProperty(`/ContractManagement/IssuingContractualLetters/Header/Po`,e[0].PurchaseOrder)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3-A"&&this.getModel().getProperty("/FragModel")===`${t}`){this.getModel().setProperty(`${r}/Price/`,e.Price);this.getModel().setProperty(`${r}/Stock/`,e.Stock)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-1"&&this.getModel().getProperty("/FragModel")===`${t}`){this.getModel().setProperty(`${r}/Plant/`,e[0].Plant)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2008-2"&&this.getModel().getProperty("/FragModel")===`${t}`){this.getModel().setProperty(`${r}/Description/`,e[0].Description)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2008-2-A"&&this.getModel().getProperty("/FragModel")===`${t}`){this.getModel().setProperty(`/WarehouseandLogistics/Localtransportsto/Header/follow_doc/`,e[0].follow_doc)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-1"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/FragModel")===`${t}`){debugger;this.getModel().setProperty("/uomF4/",e[0].BaseUnit);this.getModel().setProperty("/MaterialgroupF4/",e[0].ExternalProductGroup);this.getModel().setProperty("/servicegroupF4/",e[0].ProductGroup);this.getModel().setProperty(`/ClasssificationandInventory/ChangeRequest/Maktx/`,e[0].Description);this.getModel().setProperty(`/ClasssificationandInventory/ChangeRequest/Header/TXT50/`,e[0].MaterialLongText)}},onValueHelpCancelPress:function(){this.onHandleValueHelpCancelPress()},onFilterBarSearch:function(e){var t=e.getParameter("selectionSet");var r=[{path:this.getModel().getProperty("/valueHelpKey1"),value:t[0].getValue(),group:"DynamicF4SearchFilter"},{path:this.getModel().getProperty("/valueHelpKey2"),value:t[1].getValue(),operator:sap.ui.model.FilterOperator.Contains,group:"DynamicF4SearchFilter"}];var o=this.getFilters(r);this._filterTable(Object.keys(o).length===0?[]:o.DynamicF4SearchFilter)},handleFiltersForValueHelp:function(e){var t;if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"&&e===`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-2"&&e===`/ProcurementAdhoc/MaterialProcurement/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"&&e===`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"&&e===`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-1"&&e===`/ProcurementAdhoc/MaterialProcurement/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-A"&&e===`/ClasssificationandInventory/DuplicateResolution/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2008-2"&&e===`/WarehouseandLogistics/Localtransport/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`){var r=[{path:"Plant",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"Material4Filter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.Material4Filter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"&&e===`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}/StoragelocationF4/`||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"&&e===`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}/StoragelocationF4/`){var r=[{path:"Material",value:this.getModel().getProperty(`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`).split("-")[0],group:"StorageFilter",useOR:true},{path:"Plant",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"StorageFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.StorageFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"&&e===`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}/WarehouseF4/`||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"&&e===`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}/WarehouseF4/`){var r=[{path:"Lgort",value:this.getModel().getProperty(`/WarehouseandLogistics/IssueofMaterial/itemData/${this.getModel().getProperty("/itemIndex")}/StoragelocationF4/`).split("-")[0],group:"WarehouseFilter",useOR:true},{path:"Werks",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"WarehouseFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.WarehouseFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"&&e===`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`){var r=[{path:"Plant",value:this.getModel().getProperty("/SuppPlantF4/")?this.getModel().getProperty("/SuppPlantF4/").split("-")[0]:"",group:"ProductFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.ProductFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"&&e===`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/StoragelocationF4/`){var r=[{path:"Material",value:this.getModel().getProperty(`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`).split("-")[0],group:"StorageFilter",useOR:true},{path:"Plant",value:this.getModel().getProperty("/SuppPlantF4/")?this.getModel().getProperty("/SuppPlantF4/"):"",group:"StorageFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.StorageFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"&&e===`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/StoragelocationF4/`){var r=[{path:"Material",value:this.getModel().getProperty(`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/ProductF4/`).split("-")[0],group:"StorageFilter",useOR:true},{path:"Plant",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"StorageFilter"},{path:"StorageLoc",value:this.getModel().getProperty(`/ClasssificationandInventory/STO/itemData/${this.getModel().getProperty("/itemIndex")}/StoragelocationF4/`).split("-")[0],group:"StorageFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.StorageFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"&&e===`/MovementtypeF4/`){debugger;var r=[{path:"shkzg",value:"H",group:"StorageFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.StorageFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"&&e===`/MovementtypeF4/`){var r=[{path:"shkzg",value:"S",group:"StorageFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.StorageFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-2"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/PonoF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-1"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/PonoF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-2-A"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/PonoF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-1-A"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/PonoF4/"){var r=[{path:"Supplier",value:this.getModel().getProperty("/SupplierF4/")?this.getModel().getProperty("/SupplierF4/").split("-")[0]:"",group:"WareHouseFilter",useOR:true}];var o=this.getFilters(r);t=this._getfilterforControl(o.WareHouseFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-2"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/PrnoF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-1"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/PrnoF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-2-A"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/PrnoF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-1-A"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/PrnoF4/"){var r=[{path:"PurchasingDocument",value:this.getModel().getProperty("/PonoF4/")?this.getModel().getProperty("/PonoF4/").split("-")[0]:"",group:"WareHouseFilter",useOR:true}];var o=this.getFilters(r);t=this._getfilterforControl(o.WareHouseFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-2"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ContractvalueF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-1"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ContractvalueF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-2-A"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ContractvalueF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-1-A"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ContractvalueF4/"){var r=[{path:"PurchaseOrder",value:this.getModel().getProperty("/PrnoF4/")?this.getModel().getProperty("/PrnoF4/").split("-")[1].trim():"",group:"WareHouseFilter",useOR:true}];var o=this.getFilters(r);t=this._getfilterforControl(o.WareHouseFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-1"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ProductF4/"){var r=[{path:"Plant",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"ProductFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.ProductFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-1"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/ClassF4/"){debugger;var r=[{path:"Plant",value:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",group:"ProductFilter"},{path:"Material",value:this.getModel().getProperty("/ProductF4/")?this.getModel().getProperty("/ProductF4/").split("-")[0]:"",group:"ProductFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.ProductFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-1"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/MaterialgroupF4/"){var r=[{path:"ExternalProductGroup",value:this.getModel().getProperty("/servicegroupF4/")?this.getModel().getProperty("/servicegroupF4/").split("-")[0]:"",operator:sap.ui.model.FilterOperator.Contains,group:"ProductFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.ProductFilter)}else if(this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/CostcenterF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2008-2"&&this.getModel().getProperty("/HeaderValueHelp")&&this.getModel().getProperty("/valueHelpName")==="/CostcenterF4/"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2002-1"&&e===`/ProcurementAdhoc/ServiceProcurement/itemData1/${this.getModel().getProperty("/itemIndex")}/CostcenterF4/`){var r=[{path:"usrid",value:this.getCurrentUserLoggedIn(),group:"userIdFilter"}];var o=this.getFilters(r);t=this._getfilterforControl(o.userIdFilter)}else{t=[]}this.getModel().setProperty("/DynamicValuehelpFilter",t.length==0?[]:t)},onValueHelpAfterOpen:function(){var e=this.getModel().getProperty("/DynamicValuehelpFilter");this._filterTable(e,"Control")},onClearFilter:function(e){var t=e.getParameter("selectionSet");t[0].setValue(null);t[1].setValue(null);this._filterTable(new a({filters:[],and:false}))},_getfilterforControl:function(e){if(!e){return[]}return new a(e)},_filterTable:function(e,t){this.handleVHFilterTable(e,t)},_createItemDataModel:function(){this.getModel().setData({busy:false,PlantF4:"",TypeofcompetitionF4:"",IndustrysectorF4:"U- Utility Industry",PurchasinggroupF4:"901- STO-PlantRequestor",UploadedData:[],SCMAppVisible:null,ProcurementAdhoc:{MaterialProcurement:{Header:{},itemData:[]},ServiceProcurement:{Header:{},itemData:[{Txz01:"",Matkl:"",Ekgrp:""}],itemData1:[]},PrepareofDirectpurchase:{Header:{},itemData:[]},PrepareforTender:{Header:{},itemData:[]},PrepareforFramework:{Header:{},itemData:[]}},Quality:{SpecalizedWorkQualification:{Header:{},itemData:[]},ManfactureQualification:{Header:{},itemData:[]},ConsultantQualification:{Header:{},itemData:[]}},ContractManagement:{ContractualChangeOrders:{Header:{},itemData:[]},NonContractualOrders:{Header:{},itemData:[]},IssuingContractualLetters:{Header:{},itemData:[]},ContractClosure:{Header:{},itemData:[]}},ClasssificationandInventory:{ChangeRequest:{Header:{quantity:"1",MaterialVisible:false},itemData:[]},DuplicateResolution:{Header:{},itemData:[]},SPIR:{Header:{},itemData:[]},STO:{Header:{},itemData:[]}},WarehouseandLogistics:{IssueofMaterial:{Header:{},itemData:[]},Localtransport:{Header:{},itemData:[]},Localtransportsto:{Header:{},itemData:[]},Scrapsale:{Header:{},itemData:[]}}})},handleBackPress:function(){this.navigationBack()},handleBackHomePress:function(){this.getRouter().navTo("HomePage",{},true)},onProceed:function(e){this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2002-1"?this.ScmCreateServiceProcurementRequest(this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/Header/"),this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/itemData/"),this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/itemData1/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2002-2"?this.ScmCreateServiceProcurementRequest(this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/Header/"),this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/itemData/"),this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/itemData1/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-1"?this.ScmCreateMaterialProcurementRequest(this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/Header/"),this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-2"?this.ScmCreateMaterialProcurementRequest(this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/Header/"),this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2004-1"?this.ScmCreateRfcRequest(this.getModel().getProperty("/ProcurementAdhoc/PrepareofDirectpurchase/Header/"),this.getModel().getProperty("/ProcurementAdhoc/PrepareofDirectpurchase/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2004-2"?this.ScmCreateRfcRequest(this.getModel().getProperty("/ProcurementAdhoc/PrepareofDirectpurchase/Header/"),this.getModel().getProperty("/ProcurementAdhoc/PrepareofDirectpurchase/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2004-3"?this.ScmCreateRfcRequest(this.getModel().getProperty("/ProcurementAdhoc/PrepareofDirectpurchase/Header/"),this.getModel().getProperty("/ProcurementAdhoc/PrepareofDirectpurchase/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2005-1"?this.ScmCreatespecializedworkqualificationRequest(this.getModel().getProperty("/Quality/SpecalizedWorkQualification/Header/"),""):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2005-2"?this.ScmCreatespecializedworkqualificationRequest(this.getModel().getProperty("/Quality/SpecalizedWorkQualification/Header/"),""):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2005-3"?this.ScmCreatespecializedworkqualificationRequest(this.getModel().getProperty("/Quality/SpecalizedWorkQualification/Header/"),""):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"?this.ScmCreateissueofmaterialRequest(this.getModel().getProperty("/WarehouseandLogistics/IssueofMaterial/Header/"),this.getModel().getProperty("/WarehouseandLogistics/IssueofMaterial/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"?this.ScmCreateissueofmaterialRequest(this.getModel().getProperty("/WarehouseandLogistics/IssueofMaterial/Header/"),this.getModel().getProperty("/WarehouseandLogistics/IssueofMaterial/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3-A"?this.ScmCreatescrapsaleRequest(this.getModel().getProperty("/WarehouseandLogistics/Scrapsale/Header/"),this.getModel().getProperty("/WarehouseandLogistics/Scrapsale/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2008-2"?this.ScmCreatelocaltransportRequest(this.getModel().getProperty("/WarehouseandLogistics/Localtransport/Header/"),this.getModel().getProperty("/WarehouseandLogistics/Localtransport/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2008-2-A"?this.ScmCreatelocaltransportstoRequest(this.getModel().getProperty("/WarehouseandLogistics/Localtransportsto/Header/"),this.getModel().getProperty("/WarehouseandLogistics/Localtransportsto/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-1"?this.ScmCreatechangeRequest(this.getModel().getProperty("/ClasssificationandInventory/ChangeRequest/Header/"),this.getModel().getProperty("/ClasssificationandInventory/ChangeRequest/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-A"?this.ScmCreateduplicateresolutionRequest(this.getModel().getProperty("/ClasssificationandInventory/DuplicateResolution/Header/"),this.getModel().getProperty("/ClasssificationandInventory/DuplicateResolution/itemData/"),e.getSource().getText()):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2012-1"?this.ScmCreatespirRequest(this.getModel().getProperty("/ClasssificationandInventory/SPIR/Header/"),""):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"?this.ScmCreatestoRequest(this.getModel().getProperty("/ClasssificationandInventory/STO/Header/"),this.getModel().getProperty("/ClasssificationandInventory/STO/itemData/")):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-1"?this.ScmContractualChangeOrdersRequest(this.getModel().getProperty("/ContractManagement/ContractualChangeOrders/Header/"),""):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-1-A"?this.ScmContractualChangeOrdersRequest(this.getModel().getProperty("/ContractManagement/ContractualChangeOrders/Header/"),""):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-2"?this.ScmIssuingRequest(this.getModel().getProperty("/ContractManagement/IssuingContractualLetters/Header/"),""):null;this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2007-2-A"?this.ScmIssuingRequest(this.getModel().getProperty("/ContractManagement/ContractClosure/Header/"),""):null},ScmCreateServiceProcurementRequest:function(e,t,r){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleItemValidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/itemData/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const o=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var i={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{EstPrice:`${e.TotalPrice}`,TotalValue:`${e.TotalServiceLevel}`,ServLev:e.ServiceLevel,TenPre:e.TenPre,ReqStat:this.getModel().getProperty("/RequeststatF4/")?this.getModel().getProperty("/RequeststatF4/").split("-")[0]:"",PrJust:e.PrJust,ContDur:e.ContDur,ConfProj:this.getModel().getProperty("/ConfidentialF4/")?this.getModel().getProperty("/ConfidentialF4/").split("-")[0]:"",ProjTyp:this.getModel().getProperty("/ProjecttypeF4/")?this.getModel().getProperty("/ProjecttypeF4/").split("-")[0]:"",SiteVis:this.getModel().getProperty("/SitevisitF4/")?this.getModel().getProperty("/SitevisitF4/").split("-")[0]:"",EstTyp:this.getModel().getProperty("/CostestF4/")?this.getModel().getProperty("/CostestF4/").split("-")[0]:"",SugComp:e.SugComp,TecEva:e.TecEva,EconFeas:e.EconFeas,SecProj:e.SecProj,ExTc:e.ExTc,Txz01:t[0].Txz01,Matkl:t[0].servicegroupF4?t[0].servicegroupF4.split("-")[0]:"",Ekgrp:t[0].PurchasinggroupF4?t[0].PurchasinggroupF4.split("-")[0]:"",Werks:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):""},ServiceHeadertoItem:t.map(function(e){return{Txz01:e.Txz01,Meins:e.uomF4?e.uomF4.split("-")[0]:"",Kostl:e.CostcenterF4?e.CostcenterF4.split("-")[0]:"",Menge:e.Menge,UnitPrice:e.UnitPrice,Afnam:e.AFNAM}})};this.SCMCreateaRequestAPI(i)},ScmCreateMaterialProcurementRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleItemValidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/Header/itemData/")))return false;const r=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var o={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{TotalValue:`${e.TotalServiceLevel}`,ServLev:e.ServiceLevel,PrJust:e.PrJust,TenPre:e.TenPre,EstPrice:`${e.EstPrice}`},ServiceHeadertoItem:t.map(function(e){return{Matnr:e.ProductF4?e.ProductF4.split("-")[0]:"",Werks:e.Plant,Menge:e.Menge,Ekgrp:e.PurchasinggroupF4?e.PurchasinggroupF4.split("-")[0]:"",UnitPrice:e.UnitPrice,Afnam:e.AFNAM}})};this.SCMCreateaRequestAPI(o)},ScmCreateRfcRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/")))return false;var r={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{SecName:e.SEC_NAME,ReqParty:e.REQ_PARTY,CompTyp:this.getModel().getProperty("/TypeofcompetitionF4/ ")?this.getModel().getProperty("/TypeofcompetitionF4/").split("-")[0]:"",EstCost:e.EST_COST,ImpPeriod:e.IMP_PERIOD,ProjName:e.PROJ_NAME},ServiceHeadertoItem:[]};this.SCMCreateaRequestAPI(r)},ScmCreatespecializedworkqualificationRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var o={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{QualTyp:e.QUAL_TYP,SuppName:e.SUPP_NAME,VenTyp:this.getModel().getProperty("/ProjectstatusF4/ ")?this.getModel().getProperty("/ProjectstatusF4/").split("-")[0]:"",SuppCon:e.SUPP_CON,SuppCr:e.SUPP_CR,ProjName:e.PROJ_NAME},ServiceHeadertoItem:[],Attachments:r};this.SCMCreateaRequestAPI(o)},ScmCreateissueofmaterialRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleItemValidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/WarehouseandLogistics/IssueofMaterial//itemData/")))return false;var r={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{Rsdat:this.handleOdataDateFormat(e.Rsdat),Bwart:this.getModel().getProperty("/MovementtypeF4/")?this.getModel().getProperty("/MovementtypeF4/").split("-")[0]:"",Kostl:this.getModel().getProperty("/costF4/")?this.getModel().getProperty("/costF4/").split("-")[0]:"",Wempf:e.WEMPF,Werks:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/").split("-")[0]:""},ServiceHeadertoItem:t.map(function(e){return{Matnr:e.ProductF4?e.ProductF4.split("-")[0]:"",Werks:e.Plant,Menge:e.Menge,Lgort:e.StoragelocationF4?e.StoragelocationF4.split("-")[0]:"",Sgtxt:e.Sgtxt}})};this.SCMCreateaRequestAPI(r)},ScmCreatechangeRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleItemValidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/ClasssificationandInventory/ChangeRequest/Header/itemData/")))return false;const r=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var o={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,MaterialQty:e.quantity.toString(),ZHeaderExtra:{UsmdCreqType:e.UsmdCreqType,Mtart:this.getModel().getProperty("/MaterialtypeF4/")?this.getModel().getProperty("/MaterialtypeF4/").split("-")[0]:"",Meins:this.getModel().getProperty("/uomF4/")?this.getModel().getProperty("/uomF4/").split("-")[0]:"",Txz01:e.Txz01,Txt50:e.TXT50,Mbrsh:this.getModel().getProperty("/IndustrysectorF4/")?this.getModel().getProperty("/IndustrysectorF4/").split("-")[0]:"",Matkl:this.getModel().getProperty("/servicegroupF4/")?this.getModel().getProperty("/servicegroupF4/").split("-")[0]:"",Extwg:this.getModel().getProperty("/MaterialgroupF4/")?this.getModel().getProperty("/MaterialgroupF4/").split("-")[0]:"",Maktx:e.Maktx,Clint:this.getModel().getProperty("/ClassF4/")?this.getModel().getProperty("/ClassF4/").split("-")[0]:""},ServiceHeadertoItem:t.map(function(e){return{Atinn:e.CharcInternalID,Atwrt:e.Atwrt}}),Attachments:r};this.SCMCreateaRequestAPI(o)},ScmCreateduplicateresolutionRequest:function(e,t,r){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleItemValidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/ClasssificationandInventory/DuplicateResolution/itemData"),r)||!this.handleAttachmentvalidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const o=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var i={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{},ServiceHeadertoItem:t.map(function(e){return{Matnr:e.ProductF4?e.ProductF4.split("-")[0]:"",Werks:e.Plant}}),Attachments:o};this.SCMCreateaRequestAPI(i)},ScmCreatespirRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var o={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{SpirNo:e.SPIR_NO,Equnr:this.getModel().getProperty("/MovementtypeF4/ ")?this.getModel().getProperty("/MovementtypeF4/").split("-")[0]:"",EquiTyp:e.EQUI_TYP,SpirSub:e.SpirSub},ServiceHeadertoItem:[],Attachments:r};this.SCMCreateaRequestAPI(o)},ScmCreatestoRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleItemValidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/ClasssificationandInventory/STO/itemData/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var o={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{SupplPlant:this.getModel().getProperty("/SuppPlantF4/")?this.getModel().getProperty("/SuppPlantF4/").split("-")[0]:"",Ekgrp:e.Ekgrp,Werks:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/").split("-")[0]:""},ServiceHeadertoItem:t.map(function(e){return{Matnr:e.ProductF4?e.ProductF4.split("-")[0]:"",Werks:e.Plant,Menge:e.Menge,Lgort:e.StoragelocationF4?e.StoragelocationF4.split("-")[0]:""}}),Attachments:r};this.SCMCreateaRequestAPI(o)},ScmContractualChangeOrdersRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var o={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{ReqParty:e.ReqParty,EstPrice:this.getModel().getProperty("/ContractvalueF4/")?this.getModel().getProperty("/ContractvalueF4/").split("-")[0]:"",Ebeln:this.getModel().getProperty("/PonoF4/")?this.getModel().getProperty("/PonoF4/").split("-")[0]:"",TotalValue:`${e.TotalValue}`,Zzvendor:this.getModel().getProperty("/SupplierF4/")?this.getModel().getProperty("/SupplierF4/").split("-")[0]:""},ServiceHeadertoItem:[],Attachments:r};this.SCMCreateaRequestAPI(o)},ScmIssuingRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var o={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{ReqParty:e.ReqParty,EstPrice:e.EstPrice,Ebeln:this.getModel().getProperty("/PonoF4/")?this.getModel().getProperty("/PonoF4/").split("-")[0]:"",Zzvendor:this.getModel().getProperty("/SupplierF4/")?this.getModel().getProperty("/SupplierF4/").split("-")[0]:""},ServiceHeadertoItem:[],Attachments:r};this.SCMCreateaRequestAPI(o)},ScmCreatelocaltransportRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var o={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{Werks:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/").split("-")[0]:"",Kostl:this.getModel().getProperty("/CostcenterF4/")?this.getModel().getProperty("/CostcenterF4/").split("-")[0]:"",ServLev:e.ServiceLevel,Wempf:e.Wempf,TrTyp:e.TrTyp,VehTyp:e.VehTyp,ExtLoc:e.ExtLoc,Zzvendor:this.getModel().getProperty("/SupplierF4/")?this.getModel().getProperty("/SupplierF4/").split("-")[0]:"",ReqParty:e.ReqParty,Mobile:e.Mobile},ServiceHeadertoItem:t.map(function(e){return{Matnr:e.ProductF4?e.ProductF4.split("-")[0]:"",Txz01:e.Txz01,Menge:e.Menge,MatLen:e.Matlen,MatBrd:e.Matbrd,MatHgt:e.Mathgt,MatWgt:e.Matwgt}}),Attachments:r};this.SCMCreateaRequestAPI(o)},ScmCreatelocaltransportstoRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var o={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,Descript:this.getModel().getProperty("/StosrF4/")?this.getModel().getProperty("/StosrF4/").split("-")[0]:"",ZHeaderExtra:{Werks:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/").split("-")[0]:"",ServLev:e.ServiceLevel,Ebeln:e.Ebeln},ServiceHeadertoItem:[],Attachments:r};this.SCMCreateaRequestAPI(o)},ScmCreatescrapsaleRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/SCMAppVisible/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var o={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/SCMAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.NotifText,ZHeaderExtra:{Werks:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/").split("-")[0]:"",TotalValue:e.TotalValue},ServiceHeadertoItem:t.map(function(e){return{Matnr:e.ProductF4?e.ProductF4.split("-")[0]:"",Menge:e.Menge}}),Attachments:r};this.SCMCreateaRequestAPI(o)},SCMCreateaRequestAPI:function(e){this.getModel().setProperty("/busy",true);this.getAPI.oDataACRUDAPICall(this.getOwnerComponent().getModel("ZSSP_COMMON_SRV"),"POST","/ServNotificationSet",e).then(function(e){this._handleMessageBoxProceed(`Service Request has been created : ${e.Notificat} `);this.getModel().setProperty("/busy",false)}.bind(this)).catch(function(e){this._handleError(e);this.getModel().setProperty("/busy",false)}.bind(this))},_handleMessageBoxProceed:function(e){var t={sMessage:e};this.createMessageBoxHandler(this.onPresshomepage.bind(this))(t)},onPresshomepage:function(){this.getOwnerComponent().getRouter().navTo("HomePage")},onAddItemsPress:function(e){var t=e.getSource().getId().split("-")[2]?e.getSource().getId().split("-")[2]:"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2004-1"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2004-2"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2004-3"?this.updateItemAddModel(this.getModel().getProperty("/ProcurementAdhoc/PrepareofDirectpurchase/itemData"),{Matnr:"",Menge:""},"/ProcurementAdhoc/PrepareofDirectpurchase/itemData"):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-A"&&this.handleItemValidation(this.getModel().getProperty("/SCMAppVisible/"),this.getModel().getProperty("/ClasssificationandInventory/DuplicateResolution/itemData/"),e.getSource().getText())?this.updateItemAddModel(this.getModel().getProperty("/ClasssificationandInventory/DuplicateResolution/itemData"),{ProductF4:"",Description:"",Plant:""},"/ClasssificationandInventory/DuplicateResolution/itemData"):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"?this.updateItemAddModel(this.getModel().getProperty("/ClasssificationandInventory/STO/itemData"),{ProductF4:"",Description:"",Menge:"",BaseUnit:"",StockAvailable:"",UnitPrice:"",TotalPrice:""},"/ClasssificationandInventory/STO/itemData"):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"?this.updateItemAddModel(this.getModel().getProperty("/WarehouseandLogistics/IssueofMaterial/itemData"),{Matnr:"",Wercks:"",Menge:"",Plant:"",BaseUnit:"",Lgort:"",Lgpla:"",Sgtxt:""},"/WarehouseandLogistics/IssueofMaterial/itemData"):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-2"?this.updateItemAddModel(this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/itemData"),{Matnr:"",Wercks:"",Menge:"",Ekgrp:"",UnitPrice:"",Afnam:""},"/ProcurementAdhoc/MaterialProcurement/itemData"):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-1"?this.updateItemAddModel(this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/itemData"),{Matnr:"",Wercks:"",Menge:"",Ekgrp:"",UnitPrice:"",Afnam:""},"/ProcurementAdhoc/MaterialProcurement/itemData"):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2002-1"||this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2002-2"?this.updateItemAddModel(this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/itemData1"),{TXZ01:"",Menge:"",UnitPrice:""},"/ProcurementAdhoc/ServiceProcurement/itemData1"):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3-A"?this.updateItemAddModel(this.getModel().getProperty("/WarehouseandLogistics/Scrapsale/itemData"),{Matnr:"",Wercks:"",Menge:""},"/WarehouseandLogistics/Scrapsale/itemData"):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2008-2"?this.updateItemAddModel(this.getModel().getProperty("/WarehouseandLogistics/Localtransport/itemData"),{Matnr:"",Txz01:"",Menge:"",Matlen:"",Matbrd:"",Mathgt:"",Matwgt:""},"/WarehouseandLogistics/Localtransport/itemData"):""},updateItemAddModel:function(e,t,r){var o=e.map(function(e){return Object.assign({},e)});o.push(t);this.getModel().setProperty(`${r}`,o)},onDeleteItemPress:function(e){var t=this.extractIndexFromPath(e.getSource().getBindingContext().getPath());this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2004-1"?this.updateItemDeleteModel(t,this.getModel().getProperty("/ProcurementAdhoc/PrepareofDirectpurchase/itemData")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2004-2"?this.updateItemDeleteModel(t,this.getModel().getProperty("/ProcurementAdhoc/PrepareofDirectpurchase/itemData")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2004-3"?this.updateItemDeleteModel(t,this.getModel().getProperty("/ProcurementAdhoc/PrepareofDirectpurchase/itemData")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-2-2"?this.updateItemDeleteModel(t,this.getModel().getProperty("/ClasssificationandInventory/STO/itemData")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-2"?this.updateItemDeleteModel(t,this.getModel().getProperty("/WarehouseandLogistics/IssueofMaterial/itemData")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3"?this.updateItemDeleteModel(t,this.getModel().getProperty("/WarehouseandLogistics/IssueofMaterial/itemData")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-2"?this.updateItemDeleteModel(t,this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/itemData")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2001-1"?this.updateItemDeleteModel(t,this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/itemData")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2011-A"?this.updateItemDeleteModel(t,this.getModel().getProperty("/ClasssificationandInventory/DuplicateResolution/itemData")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2002-1"?this.updateItemDeleteModel(t,this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/itemData")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2002-1"?this.updateItemDeleteModel(t,this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/itemData1")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2002-2"?this.updateItemDeleteModel(t,this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/itemData1")):"";this.getModel().getProperty("/SCMAppVisible/")==="SSA-PSCM-2010-3-A"?this.updateItemDeleteModel(t,this.getModel().getProperty("/WarehouseandLogistics/Scrapsale/itemData")):""},updateItemDeleteModel:function(e,t){t.splice(e,1);this.getModel().refresh()},handleItemValidation:function(e,t,r){var o=true;if(e==="SSA-PSCM-2011-A"){var i=!t||t.length<2?false:true;var a=t.some((e,r)=>t.findIndex(t=>t.ProductF4===e.ProductF4)!==r);if(r==="Submit"&&(!i||a)){if(!i){l.show("Please add at least 2 Item entries")}else{l.show("Please ensure there are no duplicate materials")}o=false;return o}else if(r==="Add"&&t.length>0){var s=t.some(e=>!e.ProductF4);if(s){l.show("Please ensure Material items is selected");o=false}else if(a){l.show("Please ensure there are no duplicate materials");o=false}}}if(e==="SSA-PSCM-2011-2-2"){debugger;var i=!t||t.length===0?false:true;var s=t.some(e=>!e.Menge);if(!i){l.show("Item Data is required to Submit the request");o=false;return o}if(s===true){l.show("Please Enter Required Quantity");o=false}}return o},handleLiveChangeContractPrcUnitPrice:function(e){var t=this.getModel().getProperty("/SCMAppVisible/");debugger;if(t==="SSA-PSCM-2007-1"){var r=e.getSource().getValue()===""?"":parseInt(e.getSource().getValue());var o=parseInt(5e3)+.01*r;this.getModel().setProperty(`/ContractManagement/ContractualChangeOrders/Header/TotalValue/`,o)}else if(t==="SSA-PSCM-2007-1-A"){var r=e.getSource().getValue()===""?"":parseInt(e.getSource().getValue());var o=parseInt(1e4)+.01*r;this.getModel().setProperty(`/ContractManagement/ContractualChangeOrders/Header/TotalValue/`,o)}else if(t==="SSA-PSCM-2004-2"){var r=e.getSource().getValue()===""?"":parseInt(e.getSource().getValue());var o=parseInt(3e3)+.01*r;this.getModel().setProperty(`/ProcurementAdhoc/PrepareofDirectpurchase/Header/TotalValue/`,o)}},onChangeCrLevel:function(e){debugger;var t=e.getSource().getSelectedKey();var r=this.getModel().getProperty("/SCMAppVisible/");if(r==="SSA-PSCM-2011-1"){if(["ZEMATL02","ZFMATL02","ZGMATL02","ZHMATL02","ZIMATL02","ZJMATL02","ZDMATL02","ZAMATL02"].includes(t)){this.getModel().setProperty("/ClasssificationandInventory/ChangeRequest/Header/MaterialVisible",true);this.getModel().setProperty("/ClasssificationandInventory/ChangeRequest/Header/Materiallabel",true)}else if(["ZMATL01"].includes(t)){this.getModel().setProperty("/ClasssificationandInventory/ChangeRequest/Header/MaterialVisible",false);this.getModel().setProperty("/ClasssificationandInventory/ChangeRequest/Header/Materiallabel",false)}else{this.getModel().setProperty("/ClasssificationandInventory/ChangeRequest/Header/MaterialVisible",false);this.getModel().setProperty("/ClasssificationandInventory/ChangeRequest/Header/Materiallabel",false)}this.getModel().setProperty("/ClasssificationandInventory/ChangeRequest/Header/UsmdCreqType",t)}},itemCalculationCheck:function(e,t,r){var o="";var i=sUnit*sQty;this.getModel().setProperty(`${sBindingPath}/EstPrice/`,i);const a=this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/itemData").reduce((e,t)=>e+parseInt(t.EstPrice),0);this.getModel().setProperty("/ProcurementAdhoc/MaterialProcurement/Header/totalSum/",a);if(service==="SSA-PSCM-2001-1"){var s=this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/Header/ServiceLevel/");var l;l=s==="N"?2150+.04*a:l;l=s==="U"?3750+.04*a:l;l=s==="E"?7e3+.04*a:l;this.getModel().setProperty("/ProcurementAdhoc/MaterialProcurement/Header/TotalServiceLevel/",l)}else if(service==="SSA-PSCM-2002-1"){var s=this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/Header/ServiceLevel/");var l;l=s==="N"?2150+.04*a:l;l=s==="U"?3750+.04*a:l;l=s==="E"?7e3+.04*a:l;this.getModel().setProperty("/ProcurementAdhoc/ServiceProcurement/Header/TotalServiceLevel/",l)}var g=a+.15*a;this.getModel().setProperty("/ProcurementAdhoc/MaterialProcurement/Header/EstPrice/",g)},handleLiveChangeUnit:function(e){var t=e.getSource().getBindingContext().getPath();var r=this.extractIndexFromPath(e.getSource().getBindingContext().getPath());var o=e.getSource().getValue()===""?"":parseInt(e.getSource().getValue());var i=this.getModel().getProperty("/SCMAppVisible/");var a=parseInt(e.getSource().getBindingContext().getObject().Menge);var s=o*a;this.getModel().setProperty(`${t}/EstPrice/`,s);const l=this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/itemData").reduce((e,t)=>e+parseInt(t.EstPrice),0);this.getModel().setProperty("/ProcurementAdhoc/MaterialProcurement/Header/totalSum/",l);const g=this.getModel().getProperty("/WarehouseandLogistics/IssueofMaterial/itemData").reduce((e,t)=>e+parseInt(t.EstPrice),0);this.getModel().setProperty("/WarehouseandLogistics/IssueofMaterial/Header/totalSum/",g);if(i==="SSA-PSCM-2001-1"){var p=this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/Header/ServiceLevel/");var n;n=p==="N"?2150+.04*l:n;n=p==="U"?3750+.04*l:n;n=p==="E"?7e3+.04*l:n;this.getModel().setProperty("/ProcurementAdhoc/MaterialProcurement/Header/TotalServiceLevel/",n)}else if(i==="SSA-PSCM-2001-2"){var p=this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/Header/ServiceLevel/");var n;n=p==="N"?5e3+.04*l:n;n=p==="U"?7e3+.04*l:n;n=p==="E"?1e4+.04*l:n;this.getModel().setProperty("/ProcurementAdhoc/MaterialProcurement/Header/TotalServiceLevel/",n)}else if(i==="SSA-PSCM-2010-2"){var n;n=.04*g+g;this.getModel().setProperty("/WarehouseandLogistics/IssueofMaterial/Header/TotalServiceLevel/",n)}else if(i==="SSA-PSCM-2010-3"){var n;n=.04*g+g;this.getModel().setProperty("/WarehouseandLogistics/IssueofMaterial/Header/TotalServiceLevel/",n)}else if(i==="SSA-PSCM-2010-3-A"){var n;n=.04*g+g;this.getModel().setProperty("/WarehouseandLogistics/Scrapsale/Header/TotalServiceLevel/",n)}var d=l+.15*l;this.getModel().setProperty("/ProcurementAdhoc/MaterialProcurement/Header/EstPrice/",d)},onChangeServiceLevel:function(e){var t=e.getSource().getSelectedKey();var r=this.getModel().getProperty("/SCMAppVisible/");if(r==="SSA-PSCM-2001-1"){var o=this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/Header/totalSum/");if(!o)return;var i;i=t==="N"?2150+.04*o:i;i=t==="U"?3750+.04*o:i;i=t==="E"?7e3+.04*o:i;this.getModel().setProperty("/ProcurementAdhoc/MaterialProcurement/Header/TotalServiceLevel/",i)}else if(r==="SSA-PSCM-2001-2"){var o=this.getModel().getProperty("/ProcurementAdhoc/MaterialProcurement/Header/totalSum/");if(!o)return;var i;i=t==="N"?2150+.04*o:i;i=t==="U"?3750+.04*o:i;i=t==="E"?7e3+.04*o:i;this.getModel().setProperty("/ProcurementAdhoc/MaterialProcurement/Header/TotalServiceLevel/",i)}else if(r==="SSA-PSCM-2002-1"){var o=this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/Header/TotalPrice/");if(!o)return;var i;i=t==="N"?4e3+.04*o:i;i=t==="U"?7e3+.04*o:i;i=t==="E"?1e4+.04*o:i;this.getModel().setProperty("/ProcurementAdhoc/ServiceProcurement/Header/TotalServiceLevel/",i)}else if(r==="SSA-PSCM-2002-2"){var o=this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/Header/TotalPrice/");if(!o)return;var i;i=t==="N"?7e3+.04*o:i;i=t==="U"?1e4+.04*o:i;i=t==="E"?12e3+.04*o:i;this.getModel().setProperty("/ProcurementAdhoc/ServiceProcurement/Header/TotalServiceLevel/",i)}},handleLiveChangeServcePrcUnitPrice:function(e){var t=e.getSource().getBindingContext().getPath();var r=this.extractIndexFromPath(e.getSource().getBindingContext().getPath());var o=e.getSource().getValue()===""?"":parseInt(e.getSource().getValue());var i=parseInt(e.getSource().getBindingContext().getObject().Menge);var a=o*i;this.getModel().setProperty(`${t}/TotalPrice/`,a);const s=this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/itemData1").reduce((e,t)=>e+parseInt(t.TotalPrice),0);this.getModel().setProperty("/ProcurementAdhoc/ServiceProcurement/Header/TotalPrice/",s);var l=s+.15*s;this.getModel().setProperty("/ProcurementAdhoc/ServiceProcurement/Header/EstPrice/",l);var g=e.getSource().getSelectedKey();var p=this.getModel().getProperty("/SCMAppVisible/");if(p==="SSA-PSCM-2002-1"){var g=this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/Header/ServiceLevel/");var n=l;n=g==="N"?4e3+.04*s:n;n=g==="U"?7e3+.04*s:n;n=g==="E"?1e4+.04*s:n;this.getModel().setProperty("/ProcurementAdhoc/ServiceProcurement/Header/TotalServiceLevel/",n)}else if(p==="SSA-PSCM-2002-2"){var g=this.getModel().getProperty("/ProcurementAdhoc/ServiceProcurement/Header/ServiceLevel/");var n=l;n=g==="N"?7e3+.04*s:n;n=g==="U"?1e4+.04*s:n;n=g==="E"?12e3+.04*s:n;this.getModel().setProperty("/ProcurementAdhoc/ServiceProcurement/Header/TotalServiceLevel/",n)}},handleHeaderValidation:function(e){var t=true;var r;if(e==="SSA-PSCM-2001-1"||e==="SSA-PSCM-2001-2"){r=[{path:"/ProcurementAdhoc/MaterialProcurement/Header/ServiceLevel/",condition:true},{path:"/ProcurementAdhoc/MaterialProcurement/Header/Descript/",condition:true}]}else if(e==="SSA-PSCM-2012-1"){r=[{path:"/ClasssificationandInventory/SPIR/Header/Spirno/",condition:true},{path:"/ClasssificationandInventory/SPIR/Header/Descript/",condition:true},{path:"/ClasssificationandInventory/SPIR/Header/EQUI_TYP/",condition:true},{path:"/ClasssificationandInventory/SPIR/Header/Descript/",condition:true},{path:"/ClasssificationandInventory/SPIR/Header/SpirSub/",condition:true}]}else if(e==="SSA-PSCM-2007-1"||e==="SSA-PSCM-2007-1-A"){r=[{path:"/SupplierF4/",condition:true},{path:"/PrnoF4/",condition:true},{path:"/PonoF4/",condition:true},{path:"/ContractManagement/ContractualChangeOrders/Header/Descript/",condition:true},{path:"/ContractManagement/ContractualChangeOrders/Header/EstPrice/",condition:true}]}else if(e==="SSA-PSCM-2007-2"||e==="SSA-PSCM-2007-2-A"){r=[{path:"/SupplierF4/",condition:true},{path:"/PrnoF4/",condition:true},{path:"/PonoF4/",condition:true},{path:"/ContractManagement/IssuingContractualLetters/Header/Descript/",condition:true},{path:"/ContractManagement/IssuingContractualLetters/Header/EstPrice/",condition:true}]}else if(e==="SSA-PSCM-2011-1"){r=[{path:"/ClasssificationandInventory/ChangeRequest/Header/UsmdCreqType/",condition:true},{path:"/MaterialtypeF4/",condition:true},{path:"/ClasssificationandInventory/ChangeRequest/Maktx/",condition:true},{path:"/MaterialgroupF4/",condition:true},{path:"/IndustrysectorF4/",condition:true},{path:"/ClasssificationandInventory/ChangeRequest/Header/Descript/",condition:true},{path:"/ClasssificationandInventory/ChangeRequest/Header/Txz01/",condition:true},{path:"/uomF4/",condition:true},{path:"/servicegroupF4/",condition:true},{path:"/ClassF4/",condition:true}]}else if(e==="SSA-PSCM-2011-2-2"){r=[{path:"/SuppPlantF4/",condition:true},{path:"/ClasssificationandInventory/STO/Header/Descript/",condition:true},{path:"/ClasssificationandInventory/STO/Header/Ekgrp/",condition:true}]}else if(e==="SSA-PSCM-2002-1"){r=[{path:"/ProcurementAdhoc/ServiceProcurement/Header/TenPre/",condition:true},{path:"/ProcurementAdhoc/ServiceProcurement/Header/ContDur/",condition:true},{path:"/ProjecttypeF4/",condition:true},{path:"/CostestF4/",condition:true},{path:"/ProcurementAdhoc/ServiceProcurement/Header/TecEva/",condition:true},{path:"/ProcurementAdhoc/ServiceProcurement/Header/SugComp/",condition:true},{path:"/ProcurementAdhoc/ServiceProcurement/Header/ServiceLevel/",condition:true},{path:"/ProcurementAdhoc/ServiceProcurement/Header/Descript/",condition:true},{path:"/RequeststatF4/",condition:true},{path:"/ConfidentialF4/",condition:true},{path:"/SitevisitF4/",condition:true},{path:"/ProcurementAdhoc/ServiceProcurement/Header/EconFeas/",condition:true},{path:"/ProcurementAdhoc/ServiceProcurement/Header/SecProj/",condition:true}]}else if(e==="SSA-PSCM-2010-2"||e==="SSA-PSCM-2010-3"){r=[{path:"/WarehouseandLogistics/IssueofMaterial/Header/Rsdat/",condition:true},{path:"/MovementtypeF4/",condition:true},{path:"/WarehouseandLogistics/IssueofMaterial/Header/Descript/",condition:true}]}else if(e==="SSA-PSCM-2005-1"||e==="SSA-PSCM-2005-2"||e==="SSA-PSCM-2005-3"){r=[{path:"/Quality/SpecalizedWorkQualification/Header/PROJ_NAME/",condition:true},{path:"/ProjectstatusF4/",condition:true},{path:"/Quality/SpecalizedWorkQualification/Header/Descript/",condition:true},{path:"/Quality/SpecalizedWorkQualification/Header/SUPP_CON/",condition:true},{path:"/Quality/SpecalizedWorkQualification/Header/SUPP_NAME/",condition:true}]}else if(e==="SSA-PSCM-2004-1"||e==="SSA-PSCM-2004-2"||e==="SSA-PSCM-2004-3"){r=[{path:"/ProcurementAdhoc/PrepareofDirectpurchase/Header/SEC_NAME/",condition:true},{path:"/TypeofcompetitionF4/",condition:true},{path:"/ProcurementAdhoc/PrepareofDirectpurchase/Header/IMP_PERIOD/",condition:true},{path:"/ProcurementAdhoc/PrepareofDirectpurchase/Header/Descript/",condition:true},{path:"/ProcurementAdhoc/PrepareofDirectpurchase/Header/REQ_PARTY/",condition:true},{path:"/ProcurementAdhoc/PrepareofDirectpurchase/Header/EST_COST/",condition:true},{path:"/ProcurementAdhoc/PrepareofDirectpurchase/Header/PROJ_NAME/",condition:true}]}else if(e==="SSA-PSCM-2008-2"){r=[{path:"/WarehouseandLogistics/Localtransport/Header/ServiceLevel/",condition:true},{path:"/WarehouseandLogistics/Localtransport/Header/VehTyp/",condition:true},{path:"/SupplierF4/",condition:true},{path:"/WarehouseandLogistics/Localtransport/Header/Wempf/",condition:true},{path:"/CostcenterF4/",condition:true},{path:"/WarehouseandLogistics/Localtransport/Header/TrTyp/",condition:true},{path:"/WarehouseandLogistics/Localtransport/Header/ExtLoc/",condition:true},{path:"/WarehouseandLogistics/Localtransport/Header/ReqParty/",condition:true},{path:"/WarehouseandLogistics/Localtransport/Header/Mobile/",condition:true},{path:"/WarehouseandLogistics/Localtransport/Header/Descript/",condition:true}]}else if(e==="SSA-PSCM-2008-2-A"){r=[{path:"/SuppPlantF4/",condition:true},{path:"/WarehouseandLogistics/Localtransportsto/Header/Descript/",condition:true},{path:"/WarehouseandLogistics/Localtransportsto/Header/ServiceLevel/",condition:true}]}else if(e==="SSA-PSCM-2010-3-A"){r=[{path:"/WarehouseandLogistics/Scrapsale/Header/Descript/",condition:true}]}else if(e==="SSA-PSCM-2011-A"){r=[{path:"/ClasssificationandInventory/DuplicateResolution/Header/Descript",condition:true}]}if(!r)return true;r.forEach(e=>{var r=this.getModel().getProperty(e.path);if(!r||e.condition&&!e.condition){this.getModel().setProperty(e.path,"");this.getModel().setProperty("/ValidationFlag/",true);t=false}});if(!t){l.show("Please Enter all Mandatory Fields")}return t},handleLiveChangeQty:function(e){var t=parseInt(e.getSource().getBindingContext().getObject().Stock);var r=parseInt(e.getSource().getValue());if(r>t){l.show("Required Qty should be less than or equal to the available quatity");e.getSource().setValue(null)}},handleAttachmentvalidation:function(e,t,r){var o=true;if(e==="SSA-PSCM-2012-1"){this.getModel().setProperty("/UploadedData",t);if(!t||t.length===0){l.show("Please Upload Attachments");o=false}}else if(e==="SSA-PSCM-2011-1"){this.getModel().setProperty("/UploadedData",t);if(!t||t.length===0){l.show("Please Upload Attachments");o=false}}else if(e==="SSA-PSCM-2011-A"){this.getModel().setProperty("/UploadedData",t);if(!t||t.length===0){l.show("Please Upload Attachments");o=false}}else if(e==="SSA-PSCM-2011-2-2"){this.getModel().setProperty("/UploadedData",t);if(!t||t.length===0){l.show("Please Upload Attachments");o=false}}else if(e==="SSA-PSCM-2002-1"){this.getModel().setProperty("/UploadedData",t);if(!t||t.length===0){l.show("Please Upload Attachments");o=false}}else if(e==="SSA-PSCM-2005-1"){this.getModel().setProperty("/UploadedData",t);if(!t||t.length===0){l.show("Please Upload Attachments");o=false}}else if(e==="SSA-PSCM-2001-1"){this.getModel().setProperty("/UploadedData",t);if(!t||t.length===0){l.show("Please Upload Attachments");o=false}}return o},onFileAdded:function(e){var t=this;var r=e.getSource();var o=e.getParameter("files");if(o.length===0)return;var i=o[0].name,a=o[0].type,s=o[0],l=o[0].size;this._getImageData(s,function(e){t._addData(e,i,a,l)})},_addData:function(e,t,r,o){var i=this.getModel().getProperty("/UploadedData");if(i.length>=5){l.show("Upto 5 Documents are allowed to upload");return false}var a=i.map(function(e){return Object.assign({},e)});a.push({Filename:t,Mimetype:r,Value:e,Filesize:o});this.getModel().setProperty("/UploadedData",a)},onDeleteAttachment:function(e){var t=parseInt(e.getSource().getBindingContext().getPath().split("/")[3]);var r=this.getModel().getProperty("/UploadedData");r.splice(t,1);this.getModel().refresh()},handleMissmatch:function(){this.handleFileMissmatch()},onFileSizeExceed:function(){this.handleFileSizeExceedScm()},onCancel:function(){this.navigationBack()}})});