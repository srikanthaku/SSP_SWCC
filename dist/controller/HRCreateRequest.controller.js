sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast"],function(e,t,r,a,i,o,n){"use strict";return e.extend("com.swcc.Template.controller.HRCreateRequest",{onInit:function(){this.oRouter=this.getRouter();this.getRouter().getRoute("HRCreateRequest").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(){this._createItemDataModel();var e=this.getOwnerComponent().getModel("timezonesData");e.setSizeLimit(500);var t=e.getProperty("/");this.getModel().setProperty("/TimeZoneData",t);var r=this.getCurrentUserLoggedIn();this.getModel().setProperty("/LoginUserID",r);this.getModel().setSizeLimit(1e3);var a=jQuery.sap.storage(jQuery.sap.storage.Type.local),i=a.get("sSubServiceType");var o=i.split("_")[0];var n=i.split("_")[1];this.getModel().setProperty("/HRAppVisible/",o);this.getModel().setProperty("/ServiceDescription",n);var s=this.handlegetlocalStorage("userPlant");this.getModel().setProperty("/PlantF4",s);var l=this.handlegetlocalStorage("userType");this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1010-1"?this.getModel().setProperty("/PolicyNoF4","PN- 501369001"):null},_createItemDataModel:function(){this.getModel().setData({busy:false,LoginUserID:"",HRAppVisible:null,TimeZoneData:"",UploadedData:[],HRCreateRequest:{UploadedData:[],Header:{},CustomDisplayData:{},Attachment:[],PlantF4:[],WorkCenterF4:[]},BenefitsManagement:{SubmitComplaint:{Header:{},itemData:[]},MedicalInsurance:{Header:{},itemData:[]},ClaimRequest:{Header:{},itemData:[]}},PeopleCareCenter:{UpdateMasterData:{Header:{},itemData:[]}},Payroll:{EmployeeVacation:{Header:{},itemData:[]}},TimeManagement:{ActivatingAccessCard:{Header:{},itemData:[]},ManageEmpShifts:{Header:{},itemData:[]}},TransportationCommision:{Transfer:{Header:{},itemData:[]},EmpTransporation:{Header:{},itemData:[]},Commisioning:{Header:{},itemData:[]}},Termination:{Termination:{Header:{},itemData:[]}},CompensationRewards:{RegularRewards:{Header:{},itemData:[]}},Recruitment:{InternalRecruitment:{Header:{},itemData:[]},ExternalRecruitment:{Header:{},itemData:[]}},TrainingDevelopment:{EmployeeLearningDevelopment:{Header:{},itemData:[]}}})},onValueHelpRequest:function(e){var t=e.getSource().getAriaLabelledBy()[0].split("-")[3];var r=e.getSource().getAriaLabelledBy()[0].split("-")[4];var a=e.getSource().getAriaLabelledBy()[0].split("-")[5];var i=e.getSource().getAriaLabelledBy()[0].split("-")[6];this.getModel().setProperty("/FragModel",i);this.handleFiltersForValueHelp(this.getModel().getProperty("/FragModel"));var o=e.getSource().getCustomData()[0].getKey();var n=e.getSource().getCustomData()[0].getValue();var s=e.getSource().getCustomData()[1].getKey();var l=e.getSource().getCustomData()[1].getValue();this.getModel().setProperty("/valueHelpKey1",o);this.getModel().setProperty("/valueHelpKey2",s);var d=this.getOwnerComponent().getModel(t);var p=[{label:n,template:o,width:"10rem"},{label:l,template:s}];this.onHandleValueHelpRequest(d,p,r,a)},onValueHelpOkPress:function(e){var t=this.getModel().getProperty("/FragModel");var r=e.getParameter("tokens");var a=this.getModel().getProperty("/valueHelpKey1");var i=this.getModel().getProperty("/valueHelpKey2");var o=this.getModel();var t=t;this.onHandleValueHelpOkPress(o,t,r,a,i)},onValueHelpCancelPress:function(){this.onHandleValueHelpCancelPress()},onFilterBarSearch:function(e){var t=e.getParameter("selectionSet");var r=[{path:this.getModel().getProperty("/valueHelpKey1"),value:t[0].getValue(),group:"DynamicF4SearchFilter"},{path:this.getModel().getProperty("/valueHelpKey2"),value:t[1].getValue(),operator:sap.ui.model.FilterOperator.Contains,group:"DynamicF4SearchFilter"}];var a=this.getFilters(r);this._filterTable(Object.keys(a).length===0?[]:a.DynamicF4SearchFilter)},handleFiltersForValueHelp:function(e){var t=[{path:"Identifier",value:"Employee Location",group:"EventFilter"},{path:"value_1",value:"PN",group:"CashJrnlF4Filter"}];var r=this.getFilters(t);var a;if(this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1004-3"&&e==="/UserijdtF4/"){a=this._getfilterforControl(r.EventFilter)}else if(this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1010-1"&&e==="/PolicyNoF4/"){a=this._getfilterforControl(r.CashJrnlF4Filter)}else{a=[]}this.getModel().setProperty("/DynamicValuehelpFilter",a.length==0?[]:a)},onValueHelpAfterOpen:function(){var e=this.getModel().getProperty("/DynamicValuehelpFilter");this._filterTable(e,"Control")},onClearFilter:function(e){var t=e.getParameter("selectionSet");t[0].setValue(null);t[1].setValue(null);this._filterTable(new i({filters:[],and:false}))},_getfilterforControl:function(e){if(!e){return[]}return e},_filterTable:function(e,t){this.handleVHFilterTable(e,t)},onSelectPlant:function(e){var t=e.getSource().getSelectedKey();this.WorkCenterF4(t)},onCheckPlantVal:function(e){e.getSource().getSelectedKey()===""?e.getSource().setValue(null):""},handleBackPress:function(){this.navigationBack()},handleBackHomePress:function(){this.getRouter().navTo("HomePage",{},true)},onProceed:function(){this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1010-1-B"?this.HRCreatemedicalcaresubmitcomplaintRequest(this.getModel().getProperty("/BenefitsManagement/SubmitComplaint/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1010-1-A"?this.HRCreatemedicalcareclaimRequest(this.getModel().getProperty("/BenefitsManagement/ClaimRequest/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1010-1"?this.HRCreatemedicalcareinsuranceRequest(this.getModel().getProperty("/BenefitsManagement/MedicalInsurance/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1003-1"?this.HRCreaterewardsRequest(this.getModel().getProperty("/CompensationRewards/RegularRewards/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1003-2"?this.HRCreaterewardsRequest(this.getModel().getProperty("/CompensationRewards/RegularRewards/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1008-1"?this.HRCreateemployeevacationsRequest(this.getModel().getProperty("/Payroll/EmployeeVacation/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1009-1"?this.HRCreateupdatemasterdataRequest(this.getModel().getProperty("/PeopleCareCenter/UpdateMasterData/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1001-1"?this.HRCreaterecruitmentRequest(this.getModel().getProperty("/Recruitment/InternalRecruitment/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1001-2"?this.HRCreateexternalrecruitmentRequest(this.getModel().getProperty("/Recruitment/ExternalRecruitment/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1005-1"?this.HRCreateterminationRequest(this.getModel().getProperty("/Termination/Termination/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1004-1"?this.HRCreateterminationRequest(this.getModel().getProperty("/Termination/Termination/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1004-2"?this.HRCreateterminationRequest(this.getModel().getProperty("/Termination/Termination/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1004-3"?this.HRCreateterminationRequest(this.getModel().getProperty("/Termination/Termination/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1007-1"?this.HRCreatetimemanagementRequest(this.getModel().getProperty("/TimeManagement/ActivatingAccessCard/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1007-2"?this.HRCreatemanageemployeeRequest(this.getModel().getProperty("/TimeManagement/ManageEmpShifts/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1002-1"?this.HRCreateemployeelearningRequest(this.getModel().getProperty("/TrainingDevelopment/EmployeeLearningDevelopment/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1006-1"?this.HRCreatetransfersecondRequest(this.getModel().getProperty("/TransportationCommision/Transfer/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1006-2"?this.HRCreateemployeetransportationRequest(this.getModel().getProperty("/TransportationCommision/EmpTransporation/Header/"),""):null;this.getModel().getProperty("/HRAppVisible/")==="SSA-HR-1006-3"?this.HRCreatecomissionofallkindsRequest(this.getModel().getProperty("/TransportationCommision/Commisioning/Header/"),""):null},HRCreatemedicalcaresubmitcomplaintRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/BenefitsManagement/SubmitComplaint/Header/")))return;const r=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var a={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Begda:this.handleOdataDateFormat(e.Begda),Cname:e.Cname,Type:this.getModel().getProperty("/TypeF4/")?this.getModel().getProperty("/TypeF4/").split("-")[0]:"",Aprnum:e.Zaprnum,Idcot:e.Idcot,Zcomment:e.Zcomment},ServiceHeadertoItem:[],Attachments:r};this.HRCreateaRequestAPI(a)},HRCreatemedicalcareclaimRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var a={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Begda:this.handleOdataDateFormat(e.Begda),Cname:e.PadCname,Idcot:e.P25Idcot,Gesch:e.Gesch,Mobile:e.Zmobile,Memnum:e.Zmemnum,Iban:e.Iban,Inspol:this.getModel().getProperty("/InsurancepolicyF4/")?this.getModel().getProperty("/InsurancepolicyF4/").split("-")[0]:"",Cltype:this.getModel().getProperty("/ClaimtypeF4/")?this.getModel().getProperty("/ClaimtypeF4/").split("-")[0]:"",Amount:e.Zamount,Bankk:e.Bankk,Ort01:e.PadOrt01,Land1:this.getModel().getProperty("/CountryF4/")?this.getModel().getProperty("/CountryF4/").split("-")[0]:"",Visdat:this.handleOdataDateFormat(e.Zvisdat),Proname:e.Zproname,Zcomment:e.Zcomment},ServiceHeadertoItem:[],Attachments:r};this.HRCreateaRequestAPI(a)},HRCreatemedicalcareinsuranceRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var a={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Begda:this.handleOdataDateFormat(e.Begda),Emplt:this.getModel().getProperty("/TypeofemployeementF4/")?this.getModel().getProperty("/TypeofemployeementF4/").split("-")[0]:"",Reqt:this.getModel().getProperty("/RequesttypeF4/")?this.getModel().getProperty("/RequesttypeF4/").split("-")[0]:"",Mobile:e.Zmobile,Zcomment:e.Zcomment,Idcot:e.Idcot,Zibegda:this.handleOdataDateFormat(e.Zibegda),Polnum:this.getModel().getProperty("/PolicyNoF4/")?this.getModel().getProperty("/PolicyNoF4/").split("-")[0]:"",Zibegda:this.handleOdataDateFormat(e.Zibegda),Gesch:e.Gesch,Natio:this.getModel().getProperty("/CountryF4/")?this.getModel().getProperty("/CountryF4/").split("-")[0]:"",Vorna:e.Vorna,Nach2:e.Nach2,Nachn:e.Nachn,Depid:e.Zdepid},ServiceHeadertoItem:[],Attachments:r};this.HRCreateaRequestAPI(a)},HRCreaterewardsRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/CompensationRewards/RegularRewards/Header/")))return;var r={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Begda:this.handleOdataDateFormat(e.Begda),Massg:this.getModel().getProperty("/EventF4/")?this.getModel().getProperty("/EventF4/").split("-")[0]:"",Massn:this.getModel().getProperty("/EventreasonF4/")?this.getModel().getProperty("/EventreasonF4/").split("-")[0]:"",Payscgrp:this.getModel().getProperty("/PayscalegroupF4/")?this.getModel().getProperty("/PayscalegroupF4/").split("-")[0]:"",Paysclvl:this.getModel().getProperty("/PayscalelevelF4/")?this.getModel().getProperty("/PayscalelevelF4/").split("-")[0]:""},ServiceHeadertoItem:[]};this.HRCreateaRequestAPI(r)},HRCreateemployeevacationsRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/Payroll/EmployeeVacation/Header/")))return;const r=this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var a={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Begda:this.handleOdataDateFormat(e.Begda),Endate:this.handleOdataDateFormat(e.Zendate),Timetype:this.getModel().getProperty("/TimetypeF4/")?this.getModel().getProperty("/TimetypeF4/").split("-")[0]:""},ServiceHeadertoItem:[],Attachments:r};this.HRCreateaRequestAPI(a)},HRCreateupdatemasterdataRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/PeopleCareCenter/UpdateMasterData/Header/")))return;const r=this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var a={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Detailupdat:e.Zdetailupdat},ServiceHeadertoItem:[],Attachments:r};this.HRCreateaRequestAPI(a)},HRCreaterecruitmentRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/Recruitment/InternalRecruitment/Header/")))return;const r=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var a={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Jdescr:e.Zjdescr,Jfreq:e.Zjfreq,Jnum:e.Zjnum,Scopelevel:e.Zscopelevel,Jtasks:e.Zjtasks,Oreq:e.Zoreq,Jobtitle:this.getModel().getProperty("/JobtitleF4/")?this.getModel().getProperty("/JobtitleF4/").split("-")[0]:"",Jgrade:this.getModel().getProperty("/JobgradeF4/")?this.getModel().getProperty("/JobgradeF4/").split("-")[0]:"",Jlocation:this.getModel().getProperty("/JoblocationF4/")?this.getModel().getProperty("/JoblocationF4/").split("-")[0]:""},ServiceHeadertoItem:[],Attachments:r};this.HRCreateaRequestAPI(a)},HRCreateexternalrecruitmentRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/Recruitment/ExternalRecruitment/Header/")))return;var r={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Jdept:e.Zjdept,Exp:e.Zexp,Jtasks:e.Zjtasks,Jqreq:e.Zjqreq,Jobtitle:this.getModel().getProperty("/JobtitleF4/")?this.getModel().getProperty("/JobtitleF4/").split("-")[0]:""},ServiceHeadertoItem:[]};this.HRCreateaRequestAPI(r)},HRCreateterminationRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/Termination/Termination/Header/")))return;const r=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var a={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Begda:this.handleOdataDateFormat(e.Begda),Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Massn:this.getModel().getProperty("/TerminationF4/")?this.getModel().getProperty("/TerminationF4/").split("-")[0]:""},ServiceHeadertoItem:[],Attachments:r};this.HRCreateaRequestAPI(a)},HRCreatetimemanagementRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/TimeManagement/ActivatingAccessCard/Header")))return;var r={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Endate:this.handleOdataDateFormat(e.Zendate),Orgeh:e.Orgeh,Vorna:e.Vorna,Nachn:e.Nachn,Area:e.Zarea,Idcot:e.Idcot,Cardno:e.Zcardno},ServiceHeadertoItem:[]};this.HRCreateaRequestAPI(r)},HRCreatemanageemployeeRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/TimeManagement/ManageEmpShifts/Header/")))return;var r={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Begda:this.handleOdataDateFormat(e.Begda),Massg:this.getModel().getProperty("/EventF4/")?this.getModel().getProperty("/EventF4/").split("-")[0]:"",Massn:this.getModel().getProperty("/EventreasonF4/")?this.getModel().getProperty("/EventreasonF4/").split("-")[0]:"",Schkz:this.getModel().getProperty("/WorkscheduleF4/")?this.getModel().getProperty("/WorkscheduleF4/").split("-")[0]:""},ServiceHeadertoItem:[]};this.HRCreateaRequestAPI(r)},HRCreateemployeelearningRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"))||!this.handleAttachmentvalidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/UploadedData")))return false;const r=this.getModel().getProperty("/UploadedData").length===0?[]:this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var a={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Reqdat:this.handleOdataDateFormat(e.Reqdat),Itemdet:e.Itemdet,Userjobloc:this.getModel().getProperty("/UserJoblocationF4/")?this.getModel().getProperty("/UserJoblocationF4/").split("-")[0]:""},ServiceHeadertoItem:[]};this.HRCreateaRequestAPI(a)},HRCreatetransfersecondRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/TransportationCommision/Transfer/Header/")))return;var r={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Begda:this.handleOdataDateFormat(e.Begda),Massg:this.getModel().getProperty("/EventF4/")?this.getModel().getProperty("/EventF4/").split("-")[0]:"",Massn:this.getModel().getProperty("/EventreasonF4/")?this.getModel().getProperty("/EventreasonF4/").split("-")[0]:"",Endate:this.handleOdataDateFormat(e.Zendate)},ServiceHeadertoItem:[]};this.HRCreateaRequestAPI(r)},HRCreateemployeetransportationRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/TransportationCommision/EmpTransporation/Header/")))return;const r=this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var a={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Tzone:e.TimeZoneKey,Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Begda:this.handleOdataDateFormat(e.Begda),Massg:this.getModel().getProperty("/EventF4/")?this.getModel().getProperty("/EventF4/").split("-")[0]:"",Massn:this.getModel().getProperty("/EventreasonF4/")?this.getModel().getProperty("/EventreasonF4/").split("-")[0]:"",Payscgrp:this.getModel().getProperty("/PayscalegroupF4/")?this.getModel().getProperty("/PayscalegroupF4/").split("-")[0]:"",Zposition:this.getModel().getProperty("/PositionF4/")?this.getModel().getProperty("/PositionF4/").split("-")[0]:"",Emploc:this.getModel().getProperty("/EmployeeLocF4/")?this.getModel().getProperty("/EmployeeLocF4/").split("-")[0]:"",Paysclvl:this.getModel().getProperty("/PayscalelevelF4/")?this.getModel().getProperty("/PayscalelevelF4/").split("-")[0]:""},ServiceHeadertoItem:[],Attachments:r};this.HRCreateaRequestAPI(a)},HRCreatecomissionofallkindsRequest:function(e,t){if(!this.handleHeaderValidation(this.getModel().getProperty("/HRAppVisible/"),this.getModel().getProperty("/TransportationCommision/Commisioning/Header/")))return;const r=this.getModel().getProperty("/UploadedData").map(({Filesize:e,...t})=>t);var a={Username:this.getCurrentUserLoggedIn(),Material:this.getModel().getProperty("/HRAppVisible/"),Plant:this.getModel().getProperty("/PlantF4/")?this.getModel().getProperty("/PlantF4/"):"",Descript:e.Descript,NotifText:e.Zcomment,ZHeaderExtra:{Persno:this.getModel().getProperty("/LoginUserID").substring(0,8),Hiredat:this.handleOdataDateFormat(e.Zhiredat),Company:this.getModel().getProperty("/CompanyF4/")?this.getModel().getProperty("/CompanyF4/").split("-")[0]:"",Massn:this.getModel().getProperty("/EventreasonF4/")?this.getModel().getProperty("/EventreasonF4/").split("-")[0]:"",Orgdat:this.handleOdataDateFormat(e.Zorgdat),Seniordat:this.handleOdataDateFormat(e.Zseniordat),Servdat:this.handleOdataDateFormat(e.Zservdat),Zposition:this.getModel().getProperty("/PositionF4/")?this.getModel().getProperty("/PositionF4/").split("-")[0]:"",Emploc:this.getModel().getProperty("/EmployeeLocF4/")?this.getModel().getProperty("/EmployeeLocF4/").split("-")[0]:"",Tzone:e.TimeZoneKey,Contrtype:this.getModel().getProperty("/ContracttypeF4/")?this.getModel().getProperty("/ContracttypeF4/").split("-")[0]:"",Payscgrp:this.getModel().getProperty("/PayscalegroupF4/")?this.getModel().getProperty("/PayscalegroupF4/").split("-")[0]:"",Paysclvl:this.getModel().getProperty("/PayscalelevelF4/")?this.getModel().getProperty("/PayscalelevelF4/").split("-")[0]:"",Schkn:this.getModel().getProperty("/PayscalelevelF4/")?this.getModel().getProperty("/PayscalelevelF4/").split("-")[0]:"",Timeprf:this.getModel().getProperty("/TimeProfileF4/")?this.getModel().getProperty("/TimeProfileF4/").split("-")[0]:"",Timerecprf:this.getModel().getProperty("/TimeRecoringF4/")?this.getModel().getProperty("/TimeRecoringF4/").split("-")[0]:"",Timerecadmis:this.getModel().getProperty("/TimeRecoringAdmisF4/")?this.getModel().getProperty("/TimeRecoringAdmisF4/").split("-")[0]:"",Timerecvar:this.getModel().getProperty("/TimeRecoringVariantF4/")?this.getModel().getProperty("/TimeRecoringVariantF4/").split("-")[0]:"",Clockinout:this.getModel().getProperty("/ClockInOutF4/")?this.getModel().getProperty("/ClockInOutF4/").split("-")[0]:"",Payrollid:e.Payrollid,Paygrp:this.getModel().getProperty("/PayGroupF4/")?this.getModel().getProperty("/PayGroupF4/").split("-")[0]:""},ServiceHeadertoItem:[],Attachments:r};this.HRCreateaRequestAPI(a)},HRCreateaRequestAPI:function(e){this.getModel().setProperty("/busy",true);this.getAPI.oDataACRUDAPICall(this.getOwnerComponent().getModel("ZSSP_COMMON_SRV"),"POST","/ServNotificationSet",e).then(function(e){this._handleMessageBoxProceed(`Service Request has been created : ${e.Notificat} `);this.getModel().setProperty("/busy",false)}.bind(this)).catch(function(e){this._handleError(e);this.getModel().setProperty("/busy",false)}.bind(this))},_handleMessageBoxProceed:function(e){var t={sMessage:e};this.createMessageBoxHandler(this.onPresshomepage.bind(this))(t)},onPresshomepage:function(){this.getOwnerComponent().getRouter().navTo("HomePage")},handleValidation:function(e,t,r){if(!this.handleHeaderValidation(e,t)||!this.handleItemValidation(e,r))return false},handleHeaderValidation:function(e,t){var r=true;var a;if(e==="SSA-HR-1005-1"||e==="SSA-HR-1004-1"||e==="SSA-HR-1004-2"||e==="SSA-HR-1004-3"||e==="SSA-HR-1005-1"){a=[{path:"/Termination/Termination/Header/Begda/",condition:true},{path:"/Termination/Termination/Header/Descript/",condition:true}]}else if(e==="SSA-HR-1001-1"){a=[{path:"/Recruitment/InternalRecruitment/Header/Zjnum/",condition:true},{path:"/JobtitleF4/",condition:true},{path:"/Recruitment/InternalRecruitment/Header/Zoreq/",condition:true},{path:"/JobgradeF4/",condition:true},{path:"/Recruitment/InternalRecruitment/Header/Zjdescr/",condition:true},{path:"/JoblocationF4/",condition:true},{path:"/Recruitment/InternalRecruitment/Header/Zjfreq/",condition:true},{path:"/Recruitment/InternalRecruitment/Header/Zscopelevel/",condition:true},{path:"/Recruitment/InternalRecruitment/Header/Descript/",condition:true},{path:"/Recruitment/InternalRecruitment/Header/Zjtasks/",condition:true}]}else if(e==="SSA-HR-1001-2"){a=[{path:"/Recruitment/ExternalRecruitment/Header/Zexp/",condition:true},{path:"/JobtitleF4/",condition:true},{path:"/Recruitment/ExternalRecruitment/Header/Zjtasks/",condition:true},{path:"/Recruitment/ExternalRecruitment/Header/Zjqreq/",condition:true},{path:"/Recruitment/ExternalRecruitment/Header/Descript/",condition:true},{path:"/Recruitment/ExternalRecruitment/Header/Zjdept/",condition:true}]}else if(e==="SSA-HR-1002-1"){a=[{path:"/UserJoblocationF4/",condition:true},{path:"/TrainingDevelopment/EmployeeLearningDevelopment/Header/Itemdet/",condition:true},{path:"/TrainingDevelopment/EmployeeLearningDevelopment/Header/Descript/",condition:true},{path:"/TrainingDevelopment/EmployeeLearningDevelopment/Header/Reqdat/",condition:true}]}else if(e==="SSA-HR-1003-1"||e==="SSA-HR-1003-2"){a=[{path:"/EventF4/",condition:true},{path:"/EventreasonF4/",condition:true},{path:"/CompensationRewards/RegularRewards/Header/Descript/",condition:true},{path:"/CompensationRewards/RegularRewards/Header/Begda/",condition:true}]}else if(e==="SSA-HR-1007-1"){a=[{path:"/TimeManagement/ActivatingAccessCard/Header/Vorna/",condition:true},{path:"/TimeManagement/ActivatingAccessCard/Header/Zarea/",condition:true},{path:"/TimeManagement/ActivatingAccessCard/Header/Zendate/",condition:true},{path:"/TimeManagement/ActivatingAccessCard/Header/Nachn/",condition:true},{path:"/TimeManagement/ActivatingAccessCard/Header/Idcot/",condition:true},{path:"/TimeManagement/ActivatingAccessCard/Header/Descript/",condition:true},{path:"/TimeManagement/ActivatingAccessCard/Header/Zcardno/",condition:true},{path:"/TimeManagement/ActivatingAccessCard/Header/Orgeh/",condition:true}]}else if(e==="SSA-HR-1007-2"){a=[{path:"/TimeManagement/ManageEmpShifts/Header/Begda/",condition:true},{path:"/TimeManagement/ManageEmpShifts/Header/Descript/",condition:true},{path:"/EventF4/",condition:true},{path:"/WorkscheduleF4/",condition:true},{path:"/EventreasonF4/",condition:true}]}else if(e==="SSA-HR-1008-1"){a=[{path:"/Payroll/EmployeeVacation/Header/Zendate/",condition:true},{path:"/Payroll/EmployeeVacation/Header/Descript/",condition:true},{path:"/TimetypeF4/",condition:true},{path:"/Payroll/EmployeeVacation/Header/Begda/",condition:true}]}else if(e==="SSA-HR-1006-1"){a=[{path:"/TransportationCommision/Transfer/Header/Zendate/",condition:true},{path:"/TransportationCommision/Transfer/Header/Descript/",condition:true},{path:"/EventreasonF4/",condition:true},{path:"/EventF4/",condition:true},{path:"/TransportationCommision/Transfer/Header/Begda/",condition:true}]}else if(e==="SSA-HR-1006-2"){a=[{path:"/TransportationCommision/EmpTransporation/Header/Begda/",condition:true},{path:"/TransportationCommision/EmpTransporation/Header/Descript/",condition:true},{path:"/PositionF4/",condition:true},{path:"/EventF4/",condition:true},{path:"/EventreasonF4/",condition:true},{path:"/TransportationCommision/EmpTransporation/Header/TimeZoneKey/",condition:true},{path:"/EmployeeLocF4/",condition:true}]}else if(e==="SSA-HR-1010-1-A"){a=[{path:"/BenefitsManagement/ClaimRequest/Header/PadCname/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/Zmobile/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/Descript/",condition:true},{path:"/InsurancepolicyF4/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/Zamount/",condition:true},{path:"/CountryF4/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/Zproname/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/Begda/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/Zmemnum/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/P25Idcot/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/Iban/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/Gesch/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/PadOrt01/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/Zvisdat/",condition:true},{path:"/ClaimtypeF4/",condition:true},{path:"/BenefitsManagement/ClaimRequest/Header/Bankk/",condition:true}]}else if(e==="SSA-HR-1006-3"){a=[{path:"/TransportationCommision/Commisioning/Header/Zorgdat/",condition:true},{path:"/TransportationCommision/Commisioning/Header/Zservdat/",condition:true},{path:"/TransportationCommision/Commisioning/Header/Descript/",condition:true},{path:"/JobtitleF4/",condition:true},{path:"/PayscalelevelF4/",condition:true},{path:"/ContracttypeF4/",condition:true},{path:"/TimeProfileF4/",condition:true},{path:"/TimeRecoringAdmisF4/",condition:true},{path:"/ClockInOutF4/",condition:true},{path:"/PayGroupF4/",condition:true},{path:"/EventreasonF4/",condition:true},{path:"/PositionF4/",condition:true},{path:"/TransportationCommision/Commisioning/Header/TimeZoneKey/",condition:true},{path:"/PayscalegroupF4/",condition:true},{path:"/WorkscheduleF4/",condition:true},{path:"/TimeRecoringF4/",condition:true},{path:"/TimeRecoringVariantF4/",condition:true},{path:"/Payrollid/",condition:true},{path:"/TransportationCommision/Commisioning/Header/Zhiredat/",condition:true},{path:"/TransportationCommision/Commisioning/Header/Zseniordat/",condition:true}]}else if(e==="SSA-HR-1010-1"){a=[{path:"/PolicyNoF4/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Begda/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Descript/",condition:true},{path:"/TypeofemployeementF4/",condition:true},{path:"/RequesttypeF4/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Zmobile/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Idcot/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Zibegda/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Gbdat/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Gesch/",condition:true},{path:"/CountryF4/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Vorna/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Nach2/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Nachn/",condition:true},{path:"/BenefitsManagement/MedicalInsurance/Header/Zdepid/",condition:true}]}else if(e==="SSA-HR-1010-1-B"){a=[{path:"/TypeF4/",condition:true},{path:"/BenefitsManagement/SubmitComplaint/Header/Zaprnum/",condition:true},{path:"/BenefitsManagement/SubmitComplaint/Header/Descript/",condition:true},{path:"/BenefitsManagement/SubmitComplaint/Header/Cname/",condition:true},{path:"/BenefitsManagement/SubmitComplaint/Header/Begda/",condition:true},{path:"/BenefitsManagement/SubmitComplaint/Header/Idcot/",condition:true}]}else if(e==="SSA-HR-1009-1"){a=[{path:"/PeopleCareCenter/UpdateMasterData/Header/Zdetailupdat/",condition:true},{path:"/PeopleCareCenter/UpdateMasterData/Header/Descript/",condition:true}]}var i=true;if(!a)return true;a.forEach(e=>{var t=this.getModel().getProperty(e.path);if(!t||e.condition&&!e.condition){this.getModel().setProperty(e.path,"");this.getModel().setProperty("/ValidationFlag/",true);i=false}});if(!i){n.show("Please Enter all Mandatory Fields")}return i},handleAttachmentvalidation:function(e,t,r){var a=true;if(e==="SSA-HR-1010-1-A"){this.getModel().setProperty("/UploadedData",t);if(!t||t.length===0){n.show("Please Upload Attachments");a=false}}else if(e==="SSA-HR-1010-1"){this.getModel().setProperty("/UploadedData",t);if(!t||t.length===0){n.show("Please Upload Attachments");a=false}}else if(e==="SSA-HR-1002-1"){this.getModel().setProperty("/UploadedData",t);if(!t||t.length===0){n.show("Please Upload Attachments");a=false}}return a},onSearch:function(){this.oRouter.navTo("LandingView")},onFileAdded:function(e){debugger;var t=this;var r=e.getSource();var a=e.getParameter("files");if(a.length===0)return;var i=a[0].name,o=a[0].type,n=a[0],s=a[0].size;this._getImageData(n,function(e){t._addData(e,i,o,s)})},_addData:function(e,t,r,a){var i=this.getModel().getProperty("/UploadedData");if(i.length>=5){n.show("Upto 5 Documents are allowed to upload");return false}var o=i.map(function(e){return Object.assign({},e)});o.push({Filename:t,Mimetype:r,Value:e,Filesize:a});this.getModel().setProperty("/UploadedData",o)},onDeleteAttachment:function(e){var t=parseInt(e.getSource().getBindingContext().getPath().split("/")[3]);var r=this.getModel().getProperty("/UploadedData");r.splice(t,1);this.getModel().refresh()},handleMissmatch:function(){this.handleFileMissmatch()},onFileSizeExceed:function(){this.handleFileSizeExceed()},onDownloadClaim:function(){var e="../ui5_ui5/sap/zssp_app/util/Claimform.pdf";var t=document.createElement("a");t.href=e;t.target="_blank";t.download="Claimform.pdf";t.click()},onCancel:function(){this.navigationBack()}})});