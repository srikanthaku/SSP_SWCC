sap.ui.define(["sap/ui/base/Object","sap/m/MessageBox"],function(e,s){"use strict";return e.extend("com.swcc.Template.controller.ErrorHandler",{constructor:function(e){this._oResourceBundle=e.getModel("i18n").getResourceBundle();this._oComponent=e;this._oModel=e.getModel();if(typeof this._oModel.attachMetadataFailed==="function"){this._oModel.attachMetadataFailed(this._handleMetadataFailed,this)}this._oModel.attachRequestFailed(this._handleRequestFailed,this)},_handleMetadataFailed:function(e){var s=e.getParameters();this._showServiceError(s.response)},_handleRequestFailed:function(e){var s=e.getParameters();if(s.response.statusCode!=="404"||s.response.statusCode===404&&s.response.responseText.indexOf("Cannot POST")===0){this._showServiceError(s.response)}},_showServiceError:function(e){if(this._bMessageOpen){return}e=e.statusCode===500?e.message:JSON.parse(e.responseText).error.message.value;this._bMessageOpen=true;s.error(this._sErrorText,{id:"serviceErrorMessageBox",details:e,styleClass:this._oComponent.getContentDensityClass(),actions:[s.Action.CLOSE],onClose:function(){this._bMessageOpen=false}.bind(this)})},handleError:function(e){s.error(e.message||"An unknown error occurred",{title:"Error"})}})});