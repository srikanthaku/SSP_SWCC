sap.ui.define(["./BaseController","sap/ui/core/routing/History","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,s,r,i){"use strict";return e.extend("com.swcc.Template.controller.ViewRequest",{onInit:function(){this.oRouter=this.getRouter();this.getRouter().getRoute("ViewRequest").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){debugger;var t=e.getParameter("arguments").StatusId;this._createItemDataModel();var s=this.StatusRequestFilter(t);this.getViewRequestDetails(s)},StatusRequestFilter:function(e){var t=[{path:"Username",value:this.getCurrentUserLoggedIn(),group:"SubmitStatusFilter",useOR:true},{path:"Status",value:"Request Submitted",group:"SubmitStatusFilter"},{path:"Username",value:this.getCurrentUserLoggedIn(),group:"CompleteFilter",useOR:true},{path:"Status",value:"Request Completed",group:"CompleteFilter"},{path:"Username",value:this.getCurrentUserLoggedIn(),group:"InProgessFilter",useOR:true},{path:"Status",value:"Request under Process",group:"InProgessFilter"},{path:"Username",value:this.getCurrentUserLoggedIn(),group:"allRequestFilter"}];var s=this.getFilters(t);var r;if(e==="Open"){r=s.SubmitStatusFilter}else if(e==="In_Progress"){r=s.InProgessFilter}else if(e==="Done"){r=s.CompleteFilter}else if(e==="NA"){r=s.allRequestFilter}return r},_createItemDataModel:function(){this.getModel().setData({busy:false,RequestDetails:{itemData:[]}})},handleBackPress:function(){this.navigationBack()},onRowPress:function(e){var t=e.getSource().getBindingContext().getObject();var s=t.RequestType;if(s==="SLA"){return false}if(s==="Customer Registration"){return false}this.getOwnerComponent().getRouter().navTo("DetailRequest",{RequestID:t.RequestID})},getViewRequestDetails:function(e){this.getModel().setProperty("/busy",true);var t=`/ViewRequestSet`;this.getAPI.oDataACRUDAPICall(this.getOwnerComponent().getModel("ZSSP_COMMON_SRV"),"GET",t,null,e,null).then(function(e){this.getModel().setProperty("/RequestDetails/itemData/",e.results);this.getModel().setProperty("/busy",false)}.bind(this)).catch(function(e){this._handleError(e);this.getModel().setProperty("/busy",false)}.bind(this))},onSearch:function(e){var t=[];var s=e.getSource().getValue();if(s&&s.length>0){t.push(this.createFilter("RequestID",i.Contains,s,false))}var r=this.byId("idViewRequestTable");var u=r.getBinding("items");u.filter(t)},createFilter:function(e,t,s,i){return new r(i?"tolower("+e+")":e,t,i?"'"+s.toLowerCase()+"'":s)},onPressTile:function(e){this.getOwnerComponent().getRouter().navTo("ModuleSelect")}})});